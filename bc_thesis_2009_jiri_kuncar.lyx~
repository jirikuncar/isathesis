#LyX 1.6.2 created this file. For more info see http://www.lyx.org/
\lyxformat 345
\begin_document
\begin_header
\textclass report
\begin_preamble
\usepackage{a4wide}
\usepackage{geometry}
\end_preamble
\options notitlepage
\use_default_options true
\begin_modules
theorems-ams
\end_modules
\language czech
\inputencoding utf8
\font_roman default
\font_sans default
\font_typewriter default
\font_default_family default
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\paperfontsize 12
\spacing single
\use_hyperref true
\pdf_bookmarks true
\pdf_bookmarksnumbered false
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks true
\pdf_pdfborder true
\pdf_colorlinks false
\pdf_backref section
\pdf_pdfusetitle true
\papersize a4paper
\use_geometry false
\use_amsmath 1
\use_esint 1
\cite_engine basic
\use_bibtopic false
\paperorientation portrait
\leftmargin 4cm
\topmargin 4cm
\rightmargin 4cm
\bottommargin 4cm
\secnumdepth 1
\tocdepth 1
\paragraph_separation indent
\defskip medskip
\quotes_language polish
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\author "" 
\author "" 
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
oddsidemargin 15mm 
\end_layout

\begin_layout Plain Layout


\backslash
evensidemargin 15mm
\end_layout

\begin_layout Plain Layout


\backslash
begin{titlepage}
\end_layout

\end_inset


\begin_inset VSpace 15mm
\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
Univerzita Karlova v Praze
\begin_inset Newline newline
\end_inset

Matematicko-fyzikální fakulta
\begin_inset VSpace 5mm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size larger
BAKALÁŘSKÁ PRÁCE
\begin_inset VSpace 10mm
\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Graphics
	filename logo.eps
	scale 30

\end_inset


\begin_inset VSpace 15mm
\end_inset


\end_layout

\begin_layout Standard
\align center

\size larger
Jiří Kunčar 
\begin_inset VSpace 5mm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size larger
Informační systém pro jazykovou agenturu
\begin_inset VSpace 5mm
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size large
Ústav formální a aplikované lingvistiky
\begin_inset VSpace 15mm
\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center

\size large
Vedoucí bakalářské práce: RNDr.
 Miroslav Spousta 
\begin_inset VSpace 1mm
\end_inset


\end_layout

\begin_layout Standard
\noindent
\align center

\size large
Studijní program: informatika, správa počítačových systémů
\begin_inset VSpace 20mm
\end_inset


\end_layout

\begin_layout Standard
\align center

\size large
2009
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{titlepage}
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
setcounter{page}{2}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace 10mm
\end_inset


\end_layout

\begin_layout Standard
\noindent
Děkuji panu RNDr.
 Miroslavu Spoustovi za pomoc, připomínky, cenné rady a
\begin_inset space ~
\end_inset

za odborné vedení bakalářské práce.
 Dále bych rád poděkoval společnosti Prima
\begin_inset space ~
\end_inset

Lingua
\begin_inset space ~
\end_inset

s.r.o.
 za poskytnutí informací a
\begin_inset space ~
\end_inset

podkladů k
\begin_inset space ~
\end_inset

vývoji aplikace.
 Speciální poděkování patří především paní majitelce Mgr.
 Miluši Psotové a
\begin_inset space ~
\end_inset

paní RNDr.
 Jitce Kunčarové, která vývoj informačního systému iniciovala.
\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Standard
\noindent
Prohlašuji, že jsem svou bakalářskou práci napsal samostatně a
\begin_inset space ~
\end_inset

výhradně s
\begin_inset space ~
\end_inset

použitím citovaných pramenů.
 Souhlasím se zapůjčováním práce a
\begin_inset space ~
\end_inset

jejím zveřejňováním.
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\noindent
V Praze dne 6.8.2009 
\begin_inset space \hfill{}
\end_inset

Jiří Kunčar
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\noindent
Název práce: Informační systém pro jazykovou agenturu
\begin_inset Newline newline
\end_inset

Autor: Jiří Kunčar
\begin_inset Newline newline
\end_inset

Katedra (ústav): Ústav formální a aplikované lingvistiky
\begin_inset Newline newline
\end_inset

Vedoucí bakalářské práce: RNDr.
 Miroslav Spousta
\begin_inset Newline newline
\end_inset

e-mail vedoucího: Miroslav.Spousta@mff.cuni.cz
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\noindent
Cílem práce je navrhnout a
\begin_inset space ~
\end_inset

implementovat modulární informační systém pro podnik zabývající se zejména
 výukou jazyků, tlumočením a
\begin_inset space ~
\end_inset

překlady.
 Práce obsahuje analýzu podnikových procesů a
\begin_inset space ~
\end_inset

řešení problémů při návrhu databázového schématu.
 Hlavní součásti vytvořeného systému zahrnují moduly pro evidenci kurzů,
 správu uživatelů a
\begin_inset space ~
\end_inset

tvorbu účetních podkladů.
 Systém je realizován za pomoci technologie PHP a frameworku CakePHP s využitím
 MySQL databáze pro ukládání strukturovaných dat.
 V práci jsou rozebrány výhody používání frameworku při vývoji webových
 aplikací a
\begin_inset space ~
\end_inset

možné využití existujících systému pro správu obsahu.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\noindent
Klíčová slova: informační systém, PHP, MySQL, CakePHP 
\end_layout

\begin_layout Standard
\begin_inset VSpace 10mm
\end_inset


\end_layout

\begin_layout Standard
\noindent
Title: Information system of a language school
\begin_inset Newline newline
\end_inset

Author: Jiří Kunčar
\begin_inset Newline newline
\end_inset

Department: Institute of Formal and Applied Linguistics
\begin_inset Newline newline
\end_inset

Supervisor: RNDr.
 Miroslav Spousta
\end_layout

\begin_layout Standard
\noindent
Supervisor's e-mail address: Miroslav.Spousta@mff.cuni.cz
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\noindent
The goal of the thesis is to design and implement a
\begin_inset space ~
\end_inset

modular information system for a
\begin_inset space ~
\end_inset

company particularly involved in teaching of
\begin_inset space ~
\end_inset

foreign languages, interpreting and
\begin_inset space ~
\end_inset

translating.
 The work includes analysis of business processes and solves problems in
\begin_inset space ~
\end_inset

the
\begin_inset space ~
\end_inset

design of the database schema.
 The main parts of the system include modules of courses, users administration
 and the creation of accounting documents.
 The system is implemented with the help of technology PHP and framework
 CakePHP using the MySQL database to store structured data.
 The thesis analysed the benefits of application frameworks in the development
 of web applications and the potential usage of existing content management
 systems.
\begin_inset Newline newline
\end_inset


\end_layout

\begin_layout Standard
\noindent
Keywords: information system, PHP, MySQL, CakePHP
\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Chapter
Úvod
\end_layout

\begin_layout Standard
Informační systémy hrají v
\begin_inset space ~
\end_inset

rychle se rozvíjející společnosti svou nepostradatelnou roli.
 Internet, který se stal v posledních létech dostupným pro širokou veřejnost,
 jim poskytl výbornou platformu k dalšímu rozvoji.
 Ve dříve nepříliš využívaném virtuálním prostředí umožňují rychlou a
\begin_inset space ~
\end_inset

snadnou distribuci, zpracování a
\begin_inset space ~
\end_inset

vyhledávání informací.
 Díky globálnímu dosahu Internetu se tak stávají dostupné pro širší spektrum
 zákazníků, dodavatelů i
\begin_inset space ~
\end_inset

samotných zaměstnanců.
 A
\begin_inset space ~
\end_inset

právě takto nabízené informace o
\begin_inset space ~
\end_inset


\emph on
aktuální
\emph default
 nabídce umožňují snadno a
\begin_inset space ~
\end_inset

efektivně oslovovat nové zákazníky, kteří postupně začínají převažovat nad
 zákazníky oslovenými jinými komunikačními kanály.
\end_layout

\begin_layout Standard
S využíváním Internetu zároveň rostou nároky na bezpečnost a
\begin_inset space ~
\end_inset

dostupnost uložených informací.
 Ty jsou důležité pro správu podniků a
\begin_inset space ~
\end_inset

bývají jejich nejcennějším majetkem.
 Zvyšující se požadavky vyžadují kvalitní nástroje použité při implementaci
 systému a
\begin_inset space ~
\end_inset

jejich robustnost, jelikož i
\begin_inset space ~
\end_inset

malá chyba může zapříčinit únik citlivých dat a
\begin_inset space ~
\end_inset

jejich zneužití v
\begin_inset space ~
\end_inset

globálním měřítku, které nelze vrátit zpět.
\end_layout

\begin_layout Standard
Před zaváděním informačního systému je nutné stanovit, čeho chce podnik
 s
\begin_inset space ~
\end_inset

jeho využitím v
\begin_inset space ~
\end_inset

daném čase dosáhnout.
 Tomu by měla pomoci důkladná analýza procesů a
\begin_inset space ~
\end_inset

jejich optimalizace.
\end_layout

\begin_layout Standard
\align center

\shape italic
\begin_inset Quotes pld
\end_inset

Kdo nepozná vlastní firemní procesy, nemůže je zlepšovat.
\begin_inset Quotes prd
\end_inset


\emph on
 
\begin_inset CommandInset citation
LatexCommand cite
key "informační systémy"

\end_inset


\end_layout

\begin_layout Standard
Změna zavedených procesů bývá náročná, jak z
\begin_inset space ~
\end_inset

finančního hlediska, tak z
\begin_inset space ~
\end_inset

hlediska její vlastní realizace.
 Důležitou roli zde hraje plánování časového harmonogramu a
\begin_inset space ~
\end_inset

jeho dodržování.
\end_layout

\begin_layout Standard
Zlepšení výsledků činnosti podniku se nemusí dostavit okamžitě po spuštění
 nového systému, ale až po adaptaci všech zúčastněných stran.
 Výhodou je, pokud byl daný systém navržen v
\begin_inset space ~
\end_inset

souladu se zaběhnutými a
\begin_inset space ~
\end_inset

fungujícími procesy.
 Proto bude práce věnovaná především jejich důkladnému popisu, na kterém
 bude dále stavět.
\end_layout

\begin_layout Section
Cíle práce
\end_layout

\begin_layout Standard
Cílem práce je návrh a
\begin_inset space ~
\end_inset

základní implementace webového informačního systému, usnadňující činnost
 a
\begin_inset space ~
\end_inset

spolupráci více nezávislých podniků.
 Implementace bude provedena pomocí vhodných open source technologií a
\begin_inset space ~
\end_inset

frameworků pro vývoj webových aplikací.
 V
\begin_inset space ~
\end_inset

práci budou rozebrány funkce systémů pro správu, udržování a
\begin_inset space ~
\end_inset

sdílení informací v
\begin_inset space ~
\end_inset

prostředí Internetu.
\end_layout

\begin_layout Standard
Implementovaný systém bude mimo jiné obsahovat prostředky pro správu uživatelů,
 evidenci zakázek, kalkulaci nákladů na mzdy a
\begin_inset space ~
\end_inset

fakturaci služeb.
 Cílem práce není, vzhledem k náročným právním úpravám a
\begin_inset space ~
\end_inset

častým změnám, vytvořit komplexní účetní program, ale pouze systém umožňující
 efektivní práci s
\begin_inset space ~
\end_inset

informacemi a
\begin_inset space ~
\end_inset

tvorbu podkladů pro účetní evidenci, které mohou být v
\begin_inset space ~
\end_inset

budoucnu zavedeny do některého již existujícího účetního programu.
\end_layout

\begin_layout Section
Obsah práce
\end_layout

\begin_layout Standard
Nejdůležitější částí této práce je analýza úlohy a
\begin_inset space ~
\end_inset

přesné stanovení požadavků na řešení informačního systému konkrétního podniku,
 které jsou obsažené ve druhé kapitole.
\end_layout

\begin_layout Standard
Třetí kapitola popisuje návrh vlastní implementace s
\begin_inset space ~
\end_inset

ohledem na
\begin_inset space ~
\end_inset

požadavky stanovené v
\begin_inset space ~
\end_inset

kapitole druhé.
 Jsou zde základní návrhová rozhodnutí a
\begin_inset space ~
\end_inset

důvody pro volbu konkrétních řešení.
\end_layout

\begin_layout Standard
Ve čtvrté kapitole jsou stručně popsány technologie dále používané v
\begin_inset space ~
\end_inset

této práci a
\begin_inset space ~
\end_inset

je ukázáno jejich použití.
\end_layout

\begin_layout Standard
Pátá kapitola obsahuje programátorskou dokumentaci.
 Je zde popsáno technické řešení implementace a
\begin_inset space ~
\end_inset

jsou nastíněny některé problémy, které byly při implementaci nutné řešit.
\end_layout

\begin_layout Standard
Uživatelská dokumentace je obsažena v
\begin_inset space ~
\end_inset

šesté kapitole.
 Popisuje uživatelské rozhraní vytvořených modulů a
\begin_inset space ~
\end_inset

ukazuje jejich použití na
\begin_inset space ~
\end_inset

konkrétních příkladech.
\end_layout

\begin_layout Standard
Předposlední kapitola se zabývá popisem existujících systémů pro správu
 obsahu a podporu výuky.
 Následně jsou probrány možnostmi jejich integrace do vytvořeného systému.
 
\end_layout

\begin_layout Standard
V závěru jsou přehledně shrnuty výsledky, kterých bylo při vývoji systému
 dosaženo a
\begin_inset space ~
\end_inset

jsou naznačeny možnosti dalšího rozšíření.
\end_layout

\begin_layout Chapter
Analýza úlohy
\end_layout

\begin_layout Standard
V kapitole jsou definovány základní pojmy používané při popisu požadavků
 klienta.
 Dále obsahuje seznam specifických požadavků na systém a
\begin_inset space ~
\end_inset

popis základních procesů.
 Cílem je přiblížit problematiku konkrétního informačního systému a
\begin_inset space ~
\end_inset

možné problémy skrývající se ve zdánlivě jednoduchých úkolech.
\end_layout

\begin_layout Standard
Analýza úlohy vychází z informací získaných z
\begin_inset space ~
\end_inset

materiálů dodaných klientem a
\begin_inset space ~
\end_inset

snaží se je co nepřesněji interpretovat pro použití v dalších fázích návrhu
 a
\begin_inset space ~
\end_inset

implementace.
\end_layout

\begin_layout Section
Definice a upřesnění pojmů
\end_layout

\begin_layout Standard
Dále uvedené pojmy mívají v různých odvětvích mírně odlišné významy.
 Zde budou přeneseny a
\begin_inset space ~
\end_inset

vysvětleny v
\begin_inset space ~
\end_inset

oblasti podniků zabývající se jazykovou výukou, překlady a
\begin_inset space ~
\end_inset

tlumočením.
\end_layout

\begin_layout Subsection
Agentura
\end_layout

\begin_layout Standard
S pojmem agentura se můžeme setkat převážně v
\begin_inset space ~
\end_inset

oblastech cestovního ruchu, reklamy, personalistiky, bezpečnosti a jazykových
 služeb.
 Dále v
\begin_inset space ~
\end_inset

práci bude pojem agentury používán právě v
\begin_inset space ~
\end_inset

poslední zmiňované oblasti.
\end_layout

\begin_layout Standard
Jazyková agentura je podnik zajišťující služby spojené s
\begin_inset space ~
\end_inset

výukou jazyků, tlumočením a
\begin_inset space ~
\end_inset

překlady.
 Je prostředníkem při jejich realizaci, popřípadě usnadňuje zákazníkům orientaci
 na trhu s
\begin_inset space ~
\end_inset

uvedenými službami.
\end_layout

\begin_layout Subsection
Informační systém
\end_layout

\begin_layout Standard
Informační systém (
\emph on
IS
\emph default
) je dosti široký pojem, který se postupem let vyvíjí a
\begin_inset space ~
\end_inset

nabírá nové významy.
 Z
\begin_inset space ~
\end_inset

dřívějších papírových kartoték, telefonních seznamů a
\begin_inset space ~
\end_inset

další firemní evidence, které se velice obtížně sdílely s
\begin_inset space ~
\end_inset

více subjekty, se
\begin_inset space ~
\end_inset

vyvinuly systémy poskytující firmám prostředí pro efektivnější práci a
\begin_inset space ~
\end_inset

komunikaci.
\end_layout

\begin_layout Standard
Informačním systémem rozumíme 
\begin_inset Quotes pld
\end_inset

prostředí pro sběr, udržování, zpracování a
\begin_inset space ~
\end_inset

poskytování informací
\begin_inset Quotes prd
\end_inset

 
\begin_inset CommandInset citation
LatexCommand cite
key "wikipedia"

\end_inset

, ve kterém by měla zůstat zachována důvěrnost a
\begin_inset space ~
\end_inset

integrita uložených dat.
\end_layout

\begin_layout Subsection
Produkt
\end_layout

\begin_layout Standard
Produktem bude rozuměno pořádání jazykové výuky pro danou skupinu lidí (kurz),
 dále tlumočení, překlady a
\begin_inset space ~
\end_inset

překlady s
\begin_inset space ~
\end_inset

ověřením.
 Jedná se tedy o
\begin_inset space ~
\end_inset

spojení služeb, jejichž výsledkem je znalost cizího jazyka - tedy nehmotný
 výrobek, a
\begin_inset space ~
\end_inset

předmětů vzniklých lidskou prací - překladů.
\end_layout

\begin_layout Subsection
Uživatelé
\end_layout

\begin_layout Standard
Uživateli jsou myšleny všechny osoby podílející se na zajišťování i realizaci
 produktů.
 Patří mezi ně nejen dodavatelé, odběratelé, studenti, ale i samotná agentura
 a administrativní pracovníci.
\end_layout

\begin_layout Section
Analýza požadavků klienta
\begin_inset CommandInset label
LatexCommand label
name "sec:Požadavky-klienta"

\end_inset


\end_layout

\begin_layout Standard
Základním úkolem jazykové agentury je zajišťovat služby v
\begin_inset space ~
\end_inset

oblasti jazykového vzdělávání, překladů a
\begin_inset space ~
\end_inset

tlumočení především pro široké spektrum odběratelů, tj.
\begin_inset space ~
\end_inset

podniků a individuálních zákazníků.
\end_layout

\begin_layout Standard
Podniky posílají poptávky bez ohledu na nabídku konkrétních kurzů.
 Manažer vyřizuje zakázku elektronickou poštou, telefonicky nebo osobně.
 Všechny získané informace musí být schopen zaznamenat pro pozdější zajišťování
 vhodných dodavatelů (lektorů) a kalkulaci nákladů.
 
\end_layout

\begin_layout Standard
Individuální zákazníci, tj.
 veřejnost, posílá zápisové listy s
\begin_inset space ~
\end_inset

ohledem na nabídku konkrétních kurzů určených pro veřejnost.
 Manažer sestavuje skupiny podle zápisových listů a
\begin_inset space ~
\end_inset

potvrzuje místo, termíny a
\begin_inset space ~
\end_inset

cenu výuky.
 Současně probíhá proces zajišťování lektorů.
\end_layout

\begin_layout Standard
Na začátku vývoje byl rovněž požadavek zjednodušit proces zpracování měsíčních
 výkazů lektorů, překladatelů a
\begin_inset space ~
\end_inset

tlumočníků tvořících podklady pro mzdy a
\begin_inset space ~
\end_inset

fakturaci služeb.
 Tyto měsíční výkazy neměly jednotný vzor a
\begin_inset space ~
\end_inset

ani nebylo jednoduše možné, bez znalostí místních poměrů, přiřadit vykázanou
 činnost k
\begin_inset space ~
\end_inset

jednotlivým produktům.
 Na
\begin_inset space ~
\end_inset

základě vytyčených požadavků byl zpracován následující návrh.
\end_layout

\begin_layout Subsection
Zavedení jednotných identifikátorů
\end_layout

\begin_layout Standard
Kvůli výše uvedeným problémům se začalo s
\begin_inset space ~
\end_inset

postupným zaváděním jednotných identifikátorů závazných pro všechny zúčastněné
 strany.
 Tento nepopulární krok byl ze
\begin_inset space ~
\end_inset

začátku velmi těžce přijímán a
\begin_inset space ~
\end_inset

trvalo několik měsíců, než se proces tvorby ustálil a
\begin_inset space ~
\end_inset

začal být všemi akceptován.
\end_layout

\begin_layout Itemize
Z identifikátoru musí být zřejmé, o
\begin_inset space ~
\end_inset

jakou kategorii produktu se jedná, pro
\begin_inset space ~
\end_inset

koho je určen a
\begin_inset space ~
\end_inset

kdy byl zaveden, aby se předešlo kolizím jmen v
\begin_inset space ~
\end_inset

budoucnu.
\end_layout

\begin_layout Itemize
V
\begin_inset space ~
\end_inset

průběhu měsíce vkládá administrátor zadané překlady, nově zahájené kurzy
 a individuální výuku.
\end_layout

\begin_layout Itemize
U produktu vloží poskytovatele, přiřadí zákazníka, studenty, lektora nebo
 překladatele.
 Dále cenu za
\begin_inset space ~
\end_inset

jednotku a
\begin_inset space ~
\end_inset

způsob kalkulace ceny pro zákazníka.
 
\end_layout

\begin_layout Itemize
U lektora či překladatele stanoví sazbu za jednotku.
 
\end_layout

\begin_layout Itemize
U kurzů vloží předpokládaný rozvrh, kde je uvedena učebna, lektor, den a
\begin_inset space ~
\end_inset

čas.
 Tento rozvrh slouží zároveň jako pomůcka pro
\begin_inset space ~
\end_inset

stanovení předběžných nákladů v
\begin_inset space ~
\end_inset

budoucích měsících.
 
\end_layout

\begin_layout Subsection
Měsíční výkazy
\end_layout

\begin_layout Standard
Po zavedení identifikátorů bylo potřeba sjednotit formuláře měsíčních výkazů
 a
\begin_inset space ~
\end_inset

připravit dodavatele na
\begin_inset space ~
\end_inset

možnost jejich elektronického vyplňování.
 Papírové formuláře budou do
\begin_inset space ~
\end_inset

systému vkládány administrativním pracovníkem a
\begin_inset space ~
\end_inset

elektronické budou zkontrolovány a uzamčeny.
\end_layout

\begin_layout Itemize
Každý měsíc si administrátor může z
\begin_inset space ~
\end_inset

výkazů odpracovaných jednotek lektora, překladatele a
\begin_inset space ~
\end_inset

tlumočníka zobrazit a
\begin_inset space ~
\end_inset

vytisknout přehled, kde je souhrn toho, kolik jednotek opracoval v jednotlivých
 dnech a celkem u jednotlivých produktů.
 
\end_layout

\begin_layout Itemize
Systém musí zobrazit varování při překročení stanoveného počtu vykázaných
 odpracovaných hodin nebo přeložených normostran na danou smlouvu.
\end_layout

\begin_layout Itemize
Podle potřeby potřebuje administrátor rychle řešit suplování a změny lektorů,
 k
\begin_inset space ~
\end_inset

tomu potřebuje aktuální stav.
 Příležitostně je třeba zjistit vytížení překladatelů.
\end_layout

\begin_layout Itemize
Na začátku týdne tiskne administrátor podle potřeby aktuální rozvrhy učeben
 a informuje zúčastněné strany o změnách.
 Časy individuální výuky jsou pohyblivé, lektoři musí vědět, kdy je v učebnách
 volno.
\end_layout

\begin_layout Subsection
Podklady pro fakturaci
\end_layout

\begin_layout Standard
Se vzrůstajícím objemem překladů a
\begin_inset space ~
\end_inset

odučených hodin přestávalo být únosné ruční vytváření měsíčních přehledů
 realizované výuky pro zákazníky.
 Ti si přáli být informování nejen o
\begin_inset space ~
\end_inset

počtu odučených hodin, ale i o všech změnách v
\begin_inset space ~
\end_inset

zavedeném měsíčním rozvrhu a
\begin_inset space ~
\end_inset

případném suplování.
 Zároveň musely být v
\begin_inset space ~
\end_inset

systému zachyceny vazby mezi produktem, zákazníkem a
\begin_inset space ~
\end_inset

vlastními účastníky tak, aby bylo možné stanovit výslednou cenu zakázky,
 která může být závislá jak na počtu odučených hodin či přeložených stran,
 tak na počtu účastníků.
\end_layout

\begin_layout Itemize
Před fakturací pro klienta si administrátor může sestavit seznam položek
 k
\begin_inset space ~
\end_inset

fakturaci, tzv.
 přílohu faktury.
 
\end_layout

\begin_layout Itemize
Příloha za překlady a
\begin_inset space ~
\end_inset

výuku se liší.
 U
\begin_inset space ~
\end_inset

překladů není uvedeno jméno překladatele z důvodu zabránění navázání přímého
 kontaktu.
\end_layout

\begin_layout Subsection
Správa lektorů a překladatelů
\end_layout

\begin_layout Standard
Pro agenturu je důležité shromažďování kontaktů na osoby zabývající se výukou,
 překlady a
\begin_inset space ~
\end_inset

tlumočením.
 Musí být umožněno rychlé vyhledání a
\begin_inset space ~
\end_inset

jednoduchá editace.
\end_layout

\begin_layout Itemize
V
\begin_inset space ~
\end_inset

průběhu měsíce průběžně administrátor vkládá nové dodavatele tj.
 zájemce o
\begin_inset space ~
\end_inset

spolupráci a
\begin_inset space ~
\end_inset

aktualizuje změny u
\begin_inset space ~
\end_inset

stávajících.
\end_layout

\begin_layout Itemize
Jedenkrát měsíčně odesílá administrátor minibuletin 
\begin_inset Quotes pld
\end_inset

News
\begin_inset Quotes prd
\end_inset

 vybraným lektorům a
\begin_inset space ~
\end_inset

překladatelům.
 
\end_layout

\begin_layout Itemize
\begin_inset Quotes pld
\end_inset

News
\begin_inset Quotes prd
\end_inset

 by měly být v systému přístupné pro lektory i překladatele, protože obsahují
 přílohy platné pro celý rok, např.
 formuláře k evidenci docházky.
\end_layout

\begin_layout Subsection
Oddělení správy dat více agentur
\end_layout

\begin_layout Standard
Vzhledem ke zvyklostem v agentuře bylo potřeba oddělit evidenci zakázek
 vyřizovaných manažerem pro různé podniky (tj.
 poskytovatele), jež s agenturou úzce spolupracují.
 
\end_layout

\begin_layout Itemize
Při vytváření produktu manažer zvolí poskytovatele služeb podle potřeb zákazníka.
\end_layout

\begin_layout Subsection
Podpora jazykových verzí
\end_layout

\begin_layout Standard
Systém je určen primárně pro jazykové agentury, kde se počítá s komunikací
 se zákazníky i v jiném než českém jazyce.
 K tomu bylo potřeba přizpůsobit systém již od počátku, aby měli uživatelé
 možnost si jednoduše vybrat mezi několika jazykovými variantami.
\end_layout

\begin_layout Chapter
Návrh řešení
\end_layout

\begin_layout Standard
Na základě požadavků bylo vytvořeno databázové schéma a
\begin_inset space ~
\end_inset

popis jeho napojení na
\begin_inset space ~
\end_inset

existující podniková data.
 Pro ukládání dat byla vybrána relační databáze, která poskytuje prostředky
 pro vytvoření, čtení, změnu a
\begin_inset space ~
\end_inset

smazání uložených informací
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Někdy je používaní zkratka 
\emph on
CRUD
\emph default
 z anglických slov 
\emph on
create
\emph default
, 
\emph on
read
\emph default
, 
\emph on
update
\emph default
, 
\emph on
delete
\emph default
.
\end_layout

\end_inset

.
 V
\begin_inset space ~
\end_inset

tomto případě se jeví jako nejlepší volba z
\begin_inset space ~
\end_inset

různých variant ukládání dat v
\begin_inset space ~
\end_inset

souborech.
 Předpokládá se nutnost přístupu k řádově stovkám až tisícům produktů a
\begin_inset space ~
\end_inset

přibližně stejnému množství uživatelů.
 Zároveň je nutné evidovat několik tisíců jednotlivých záznamů měsíčně o
\begin_inset space ~
\end_inset

vykázané činnosti.
\end_layout

\begin_layout Standard
V rámci vývoje a testování vybrané technologie byl rovněž vytvořen návrh
 zjednodušené verze XML
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Extensible Markup Language
\emph default
 - standardní formát pro výměnu informací a popis struktury dokumentu
\end_layout

\end_inset

 databáze uchovávané v
\begin_inset space ~
\end_inset

souboru a
\begin_inset space ~
\end_inset

zpracovávané pomocí jazyka XPath, XQuery nebo XSLT.
 Výsledky byly dobré při zpracování omezeného množství dat a
\begin_inset space ~
\end_inset

jednouživatelském přístupu.
 Se
\begin_inset space ~
\end_inset

vzrůstajícím objemem uložených dat se začala projevovat prostorová náročnost
 použitého značkovacího jazyka.
 Proto bylo nutné použít kompresi a
\begin_inset space ~
\end_inset

rozdělení dat do
\begin_inset space ~
\end_inset

více souborů.
 Alternativu tvoří některé specializované XML databáze (např.
 MonetDB, Sedna, BaseX, Xindice, eXist-db) nebo relační databáze s
\begin_inset space ~
\end_inset

podporou XML (Oracle, MS-SQL).
 Toto řešení, ale nakonec nebylo implementováno ani v
\begin_inset space ~
\end_inset

rámci testování.
\end_layout

\begin_layout Standard
Návrh dobře strukturované relační databáze vyžaduje předevších pochopení
 vztahů a
\begin_inset space ~
\end_inset

procesů fungování podniku, který ji bude využívat.
 Problémem s
\begin_inset space ~
\end_inset

optimalizací navrženého modelu pomáhají řešit algoritmy logického návrhu
 relační databáze, které se snaží zajistit, aby navržená databáze byla prostorov
ě efektivní, eliminovala vznik anomálií a
\begin_inset space ~
\end_inset

zároveň umožňovala rychlé zpracování uživatelských požadavků.
 Celý proces návrhu můžeme rozdělit na
\begin_inset space ~
\end_inset

čtyři základní fáze: analýza požadavků a
\begin_inset space ~
\end_inset

specifikace, konceptuální návrh, logický návrh a
\begin_inset space ~
\end_inset

fyzický návrh 
\begin_inset CommandInset citation
LatexCommand cite
key "soukupova 2004"

\end_inset

.
 Analýza požadavků a
\begin_inset space ~
\end_inset

specifikace byla provedena v
\begin_inset space ~
\end_inset

předcházející kapitole.
\end_layout

\begin_layout Section
Konceptuální návrh
\end_layout

\begin_layout Standard
Zpracováním požadavků vznikl prvotní model budoucí databáze, který by měl
 pokrývat všechny důležité vazby a
\begin_inset space ~
\end_inset

informace.
\end_layout

\begin_layout Subsection*
Produkty 
\end_layout

\begin_layout Standard
Ne všechny informace o
\begin_inset space ~
\end_inset

daných produktech je potřeba udržovat jako speciální atributy.
 Byla proto přijata varianta jedné tabulky s
\begin_inset space ~
\end_inset

minimem položek pro produkt.
 V
\begin_inset space ~
\end_inset

budoucnu by rozšiřovaní mělo být realizováno pomocí tabulek se specifickými
 informacemi nebo pomocí strukturovaných poznámek.
\end_layout

\begin_layout Itemize

\emph on
Identifikátor
\emph default
 obsahuje informace o
\begin_inset space ~
\end_inset

jazycích, typu produktu a
\begin_inset space ~
\end_inset

stručný jednoznačný popis.
\end_layout

\begin_layout Itemize

\emph on
Kategorie
\emph default
 určuje zařazení produktu do skupin.
 Některé skupiny produktů mohou být veřejnosti online nabízeny na webových
 stránkách.
\end_layout

\begin_layout Itemize

\emph on
Poskytovatel
\emph default
 produktu je podnik (uživatel), který realizuje produkty, tj.
 zajišťuje dodavatele a vystavuje faktury zákazníkovi.
\end_layout

\begin_layout Itemize

\emph on
Časové informace
\emph default
 jsou používány dle potřeb pro určení doby konání kurzů, tlumočení nebo
 upřesnění požadavků na vyhotovení překladu.
\end_layout

\begin_layout Itemize

\emph on
Popis
\emph default
 je veřejná informace k
\begin_inset space ~
\end_inset

produktu pro všechny zúčastněné strany.
\end_layout

\begin_layout Itemize

\emph on
Jednotka
\emph default
 a 
\emph on
jednotková cena
\emph default
 slouží zákazníkovi pro informace o účtování produktu.
\end_layout

\begin_layout Itemize

\emph on
Nastavení způsobu účtování
\emph default
 slouží pro správné stanovení způsobu výpočtu výsledné ceny produktu.
 Možné je započítat množství odpracovaných jednotek nebo počet účastníků
 na
\begin_inset space ~
\end_inset

přihlášce.
\end_layout

\begin_layout Subsection*
Přihlášky (objednávky)
\end_layout

\begin_layout Standard
Tabulka slouží k evidenci zákazníků (plátců) a produktů, které si objednali.
\end_layout

\begin_layout Itemize

\emph on
Produkt,
\emph default
 ke kterému se přihláška vztahuje.
\end_layout

\begin_layout Itemize

\emph on
Zákazník
\emph default
 vybraný z tabulky uživatelů je plátcem produktu.
\end_layout

\begin_layout Itemize

\emph on
Evidence plateb
\emph default
 je zajištěna samostatným schématem sdružujícím jednotlivé platební položky
 na účetním dokladu.
\end_layout

\begin_layout Subsection*
Účastníci
\end_layout

\begin_layout Standard
Účastníci jsou přiřazeni k danému produktu přes přihlášku s uvedením plátcem.
\end_layout

\begin_layout Itemize

\emph on
Přihláška
\end_layout

\begin_layout Itemize

\emph on
Účastník
\emph default
 vybraný z tabulky uživatelů.
\end_layout

\begin_layout Subsection*
Smlouvy
\end_layout

\begin_layout Standard
V návrhu se do budoucna počítá s kontrolou maximálního počtu odpracovaných
 jednotek.
 Některé možnosti nastavení typu smluv jsou pevně zakomponované a
\begin_inset space ~
\end_inset

půjde je změnit pouze zásahem do zdrojových kódů nebo databáze.
\end_layout

\begin_layout Itemize

\emph on
Dodavatel
\emph default
 je smluvním partnerem jazykové agentury - 
\emph on
poskytovatele 
\emph default
jazykových služeb
\end_layout

\begin_layout Itemize

\emph on
Maximální počet jednotek
\emph default
, které může na smlouvu vykonat.
\end_layout

\begin_layout Itemize

\emph on
Způsob platby 
\emph default
a
\emph on
 typ smlouvy
\emph default
 umožňují generování účetních přehledů.
\end_layout

\begin_layout Subsection*
Výkazy
\end_layout

\begin_layout Standard
Tabulka výkazů se nedrží papírové podoby, která je pro ukládání v
\begin_inset space ~
\end_inset

databázi nevhodná z
\begin_inset space ~
\end_inset

důvodu malé hustoty záznamů (obvykle 5-10 záznamů za měsíc na
\begin_inset space ~
\end_inset

jeden produkt).
 Jednotlivé záznamy budou ukládány v
\begin_inset space ~
\end_inset

oddělené tabulce s
\begin_inset space ~
\end_inset

dalšími upřesňujícími informacemi.
\end_layout

\begin_layout Standard
Z
\begin_inset space ~
\end_inset

požadavků rovněž vyplývá potřeba uzamykání výkazu k
\begin_inset space ~
\end_inset

danému datu.
 Jelikož se jedná o
\begin_inset space ~
\end_inset

velmi důležitá data, měla by být jejich kontrola prováděna na databázové
 úrovni pomocí triggeru, pokud to bude daná databáze bude podporovat.
\end_layout

\begin_layout Itemize

\emph on
Produkt
\emph default
, ke kterému se výkaz vztahuje.
\end_layout

\begin_layout Itemize

\emph on
Sazba za jednotku
\emph default
 a 
\emph on
jednotka
\emph default
, jež náleží dodavateli, jako odměna.
\end_layout

\begin_layout Itemize

\emph on
Smlouva
\emph default
 na níž je prováděna daná činnost.
\end_layout

\begin_layout Itemize

\emph on
Datum
\emph default
 před kterým již není možné přidávat, editovat nebo mazat odpracované jednotky.
\end_layout

\begin_layout Subsection*
Události
\end_layout

\begin_layout Standard
Seznam událostí je přiřazen k
\begin_inset space ~
\end_inset

výkazu a
\begin_inset space ~
\end_inset

každá událost je doplněna o
\begin_inset space ~
\end_inset

upřesňující informace.
\end_layout

\begin_layout Itemize

\emph on
Výkaz
\emph default
, ke kterému se událost vztahuje.
\end_layout

\begin_layout Itemize

\emph on
Počet jednotek
\emph default
 typu uvedeného v přiřazeném výkazu.
\end_layout

\begin_layout Itemize

\emph on
Datum
\emph default
 a 
\emph on
čas
\emph default
, kdy byla práce vykonávána.
 Slouží rovněž pro tvorbu rozvrhu hodin.
\end_layout

\begin_layout Itemize

\emph on
Místo
\emph default
 vybrané z číselníku.
\end_layout

\begin_layout Subsection*
Uživatelé
\end_layout

\begin_layout Standard
O všech uživatelích systému je potřeba vést obdobné informace.
 Proto jsou uloženi v
\begin_inset space ~
\end_inset

jedné tabulce a
\begin_inset space ~
\end_inset

o
\begin_inset space ~
\end_inset

jejich specifikaci je rozhodnuto až přiřazením do skupiny.
 Každý uživatel může být ve více skupinách.
\end_layout

\begin_layout Itemize

\emph on
Osobní údaje
\emph default
 - jméno, příjmení, titul a zobrazované jméno
\end_layout

\begin_layout Itemize

\emph on
Přihlašovací údaje
\emph default
 - přihlašovací jméno, heslo a stav účtu
\end_layout

\begin_layout Itemize

\emph on
Doručovací a fakturační adresa
\end_layout

\begin_layout Itemize
Ostatní nečleněné informace
\end_layout

\begin_layout Subsection*
Testování slovní zásoby
\end_layout

\begin_layout Standard
Tvorba testů je závislá na vytvořených slovnících se slovní zásobou.
 Jednotlivé slovníky pomohou oddělit tématické celky ve výuce cizích jazyků
 a mají definován zdrojový a cílový jazyk.
\end_layout

\begin_layout Itemize

\emph on
Počet pokusů
\emph default
, který může student vykonat.
 Větší počet pokusů je vhodný pro tréninkové účely.
\end_layout

\begin_layout Itemize

\emph on
Časový limit
\emph default
 na odeslání odpovědí od vytvoření nového pokusu.
\end_layout

\begin_layout Subsection*
Číselníky
\end_layout

\begin_layout Standard
Byly navrhnuty pro zjednodušení práce s vyplňováním formulářů a odstranění
 duplicit v tabulkách.
\end_layout

\begin_layout Standard
Patří zde 
\emph on
Místa, Kategorie, Jednotky, Daně, Skupiny, Oprávnění
\emph default
 a 
\emph on
Jazyky
\emph default
.
\end_layout

\begin_layout Section
Logický návrh
\end_layout

\begin_layout Standard
Dále budou popsány tři hlavní skupiny souvisejících tabulek, které jsou
 součástí hlavního schématu.
 Nejdůležitější část se týká správy uživatelů, kde všechny informace o
\begin_inset space ~
\end_inset

uživateli jsou uloženy v jedné tabulce.
 Dekompozice na adresy a
\begin_inset space ~
\end_inset

profilové informace je do
\begin_inset space ~
\end_inset

budoucna možná, ale v
\begin_inset space ~
\end_inset

době návrhu nebylo potřeba data dále strukturovat.
 Pro zachycení kardinality vztahu M:N mezi skupinami a
\begin_inset space ~
\end_inset

uživateli stejně jako mezi skupinami a
\begin_inset space ~
\end_inset

oprávněními byly vytvořeny vazební tabulky 
\emph on
groups_users
\emph default
 a
\begin_inset space ~
\end_inset


\emph on
groups_permissions
\emph default
.
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename uzivatele-schema.png
	lyxscale 50
	scale 35

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
Schéma uživatelů, skupin a oprávnění
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Schéma na obrázku 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Schéma-produktů"

\end_inset

 zachycuje vztahy uživatelů k
\begin_inset space ~
\end_inset

produktům.
 Dodavatelé mají vytvořenou smlouvu, ke které je přidán výkaz odpracovaných
 účtovacích jednotek na
\begin_inset space ~
\end_inset

produktu.
 Zákazníci jsou evidováni přes přihlášku se seznamem účastníků.
 Záznam docházky je realizován tabulkou 
\emph on
participators_events
\emph default
, kde existence záznamu s
\begin_inset space ~
\end_inset

víceatributovým klíčem složeného s
\begin_inset space ~
\end_inset


\emph on
id
\emph default
 účastníka a
\begin_inset space ~
\end_inset


\emph on
id
\emph default
 události indikuje přítomnost osoby ve výuce.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename produkty.png
	lyxscale 50
	scale 35

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Schéma-produktů"

\end_inset

Schéma produktů a vazeb na uživatele
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Evidence plateb je svázána s přihláškami, aby bylo možné snadno a rychle
 určit, za které služby již bylo zaplaceno.
 Spolu s informací o DPH mohou být platby sdruženy do jednoho účetního dokladu,
 jehož schéma je zobrazeno na obrázku 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Evidence-plateb"

\end_inset

.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename doklady.png
	lyxscale 50
	scale 35

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Evidence-plateb"

\end_inset

Evidence plateb
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Fyzický návrh
\end_layout

\begin_layout Standard
V uvedeném návrhu 
\begin_inset CommandInset ref
LatexCommand eqref
reference "cha:Databázové-schéma"

\end_inset

 je potřeba zajistit integritu dat a optimalizace pro rychlejší přístup
 k datům.
 K tomu slouží vytvořené cizí klíče, triggery a indexy.
 Jejich seznam a definice lze nalézt na přiloženém CD v
\begin_inset space ~
\end_inset

souboru 
\emph on
/app/config/sql_init.sql
\emph default
.
\end_layout

\begin_layout Standard
Při vytváření triggerů pro MySQL verze 5.2 nastal problém s vyvoláním výjimky
 uvnitř triggeru, pokud vkládaný, editovaný či odstraňovaný objekt nesplňoval
 zadaná kritéria.
 Řešení spočívá ve vytvoření tabulky s integritním omezením 
\emph on
UNIQUE
\emph default
 na jednom sloupci a funkce 
\emph on
FAIL('chyba')
\emph default
.
 Ta se pokusí naplnit tabulku dvěmi identickými záznamy, což poruší omezení
 na jedinečnost záznamu ve sloupci a vyvolaná výjimka zabrání potvrzení
 transakce.
 Uvedené řešení je pouze náhradou za 
\emph on
RAISE EXCEPTION
\emph default
 známé třeba z PostgreSQL, která nemá omezení na místo odkud může být vyvolána
 výjimka.
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\small\ttfamily}"
inline false
status open

\begin_layout Plain Layout

-- Tabulka s unikátním klíčem na sloupci `message`
\end_layout

\begin_layout Plain Layout

CREATE TABLE `error` (
\end_layout

\begin_layout Plain Layout

  `id` int(10) unsigned NOT NULL auto_increment,
\end_layout

\begin_layout Plain Layout

  `message` varchar(128) default NULL,
\end_layout

\begin_layout Plain Layout

  `created` timestamp NOT NULL default CURRENT_TIMESTAMP 
\end_layout

\begin_layout Plain Layout

    on update CURRENT_TIMESTAMP,
\end_layout

\begin_layout Plain Layout

  PRIMARY KEY  (`id`),
\end_layout

\begin_layout Plain Layout

  UNIQUE KEY `message_index` (`message`) 
\end_layout

\begin_layout Plain Layout

) ENGINE=MEMORY  
\end_layout

\begin_layout Plain Layout

  DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
\end_layout

\begin_layout Plain Layout

  ROW_FORMAT=FIXED
\end_layout

\begin_layout Plain Layout

  AUTO_INCREMENT=1 ;
\end_layout

\begin_layout Plain Layout

-- Fuknce pro vyvolání vyjímky.
\end_layout

\begin_layout Plain Layout

DELIMITER $$
\end_layout

\begin_layout Plain Layout

CREATE PROCEDURE fail(_Message VARCHAR(128)) 
\end_layout

\begin_layout Plain Layout

BEGIN
\end_layout

\begin_layout Plain Layout

  INSERT INTO error (message) VALUES (_Message);
\end_layout

\begin_layout Plain Layout

  INSERT INTO error (message) VALUES (_Message);
\end_layout

\begin_layout Plain Layout

END$$
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Při návrhu databáze byly použity sloupce typu ENUM, které by se musely pro
 použití v jiném databázovém systému přepsat pomocí integritních omezení.
\end_layout

\begin_layout Standard
V poslední fázi bylo schéma doplněno o tabulky pro správu menu, vyhledávání,
 tokenů, logů a emailových příloh.
 Také přibylo schéma pro správu článků a testů.
\end_layout

\begin_layout Standard
Celkově schéma 
\begin_inset CommandInset ref
LatexCommand eqref
reference "cha:Databázové-schéma"

\end_inset

 simuluje firemní procesy velice přesně a umožňuje uchovávat všechna potřebná
 data.
 Problémem může být náročnější způsob výpočtu ceny pro zákazníka.
 Pokud se totiž cena odvíjí od množství vykázaných jednotek dodavateli,
 je potřeba spojit více tabulek a
\begin_inset space ~
\end_inset

použít agregační funkci 
\emph on
SUM()
\emph default
 na počty odpracovaných jednotek v jednotlivých událostech.
\end_layout

\begin_layout Chapter
Použité technologie a frameworky
\end_layout

\begin_layout Standard
Použité technologie byly částečně determinovány požadavky klienta.
 Systém tak využívá výhradně open source technologie, aby nebyly zvyšovány
 náklady na nákup licencí.
\end_layout

\begin_layout Section
Server
\end_layout

\begin_layout Standard
Informační systém využívá technologii PHP - jazyk, interpret a
\begin_inset space ~
\end_inset

knihovny.
 PHP vychází se skriptovacího víceúčelového jazyka, který byl původně vyvinut
 pro
\begin_inset space ~
\end_inset

tvorbu dynamických webových stránek.
 Z
\begin_inset space ~
\end_inset

tohoto využití vznikla i zkratka z anglických slov 
\emph on
Personal Home Page
\emph default
 (osobní domácí stránka).
 Později byly nahrazeny slovy 
\emph on
PHP: Hypertext Preprocessor
\emph default
, které daly vznik rekurzivní zkratce
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
http://cs.wikipedia.org/wiki/Rekurzivní_zkratka
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Výhodou použití PHP je existence interpretu pro různé operační systémy a
\begin_inset space ~
\end_inset

podobnost jeho syntaxe s
\begin_inset space ~
\end_inset

C, Javou.
 Nevýhodou, která brzdí další rozvoj a
\begin_inset space ~
\end_inset

rozšíření, je absence normy.
 Jazyk je tak de
\begin_inset space ~
\end_inset

facto standardizovaný interpretem a
\begin_inset space ~
\end_inset

množstvím lidí
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
viz statistiky na http://www.php.net/usage.php
\end_layout

\end_inset

, kteří jej využívají.
 I
\begin_inset space ~
\end_inset

když existují mnohé polemiky a
\begin_inset space ~
\end_inset

živé diskuze mezi jeho zastánci a
\begin_inset space ~
\end_inset

odpůrci o
\begin_inset space ~
\end_inset

jeho výkonnosti, bezpečnosti a
\begin_inset space ~
\end_inset

vhodnosti pro
\begin_inset space ~
\end_inset

velké projekty.
 Existují ovšem výjimky
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Facebook, YouTube, Wikipedia (MediaWiki) a další
\end_layout

\end_inset

, které tyto názory vyvrací a
\begin_inset space ~
\end_inset

zároveň se podílejí na vývoji, a
\begin_inset space ~
\end_inset

tak se snaží přispět k
\begin_inset space ~
\end_inset

jeho větší výkonnosti a bezpečnosti.
\end_layout

\begin_layout Standard
Vývoj jazyka sebou nese i
\begin_inset space ~
\end_inset

stinné stránky.
 Po letech vývoje dochází k
\begin_inset space ~
\end_inset

úpravám API
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Application Programming Interface
\emph default
, označuje sadu funkcí, procedur nebo tříd programu popřípadě knihovny,
 které mohou být využívány programátorem 
\end_layout

\end_inset

 některých vestavěných funkcí a
\begin_inset space ~
\end_inset

změna syntaxe.
 To může zapříčinit, že po aktualizaci interpretu jazyka, přestanou fungovat
 některé části nebo celá aplikace.
\end_layout

\begin_layout Standard
Nesporná výhoda používání frameworků spočívá v
\begin_inset space ~
\end_inset

jednodušším vývoji aplikací a
\begin_inset space ~
\end_inset

minimalizací rizika chyb v
\begin_inset space ~
\end_inset

jinak ručně psaném jádru aplikace.
 Toto platí pouze za
\begin_inset space ~
\end_inset

předpokladu, že je dostupná kvalitní dokumentace a
\begin_inset space ~
\end_inset

vývoj včetně testování je zastřešen silnou komunitou nebo společností.
 Některé frameworky rovněž dokáží do jisté míry zakrýt rozdíly mezi ve
\begin_inset space ~
\end_inset

verzích jazyka.
 Děje se tak, za
\begin_inset space ~
\end_inset

cenu zpomalení některých částí aplikace, díky kontrole verze překladače
 a
\begin_inset space ~
\end_inset

vykonáním alternativního kódu.
\end_layout

\begin_layout Standard
Při výběru frameworku byl kladen důraz hlavně na
\begin_inset space ~
\end_inset

kvalitní dokumentaci, rozšířitelnost a
\begin_inset space ~
\end_inset

možnost práce s
\begin_inset space ~
\end_inset

různými relačními databázemi.
 Frameworky splňující vetšinu požadavků jsou Zend, Prado, Symfony a
\begin_inset space ~
\end_inset

CakePHP, který navíc ve
\begin_inset space ~
\end_inset

výkonnostních testech podle 
\begin_inset CommandInset citation
LatexCommand cite
key "root-testy"

\end_inset

 dopadl velmi dobře, a
\begin_inset space ~
\end_inset

tak byl vybrán pro vývoj informačního systému.
\end_layout

\begin_layout Subsection
CakePHP
\end_layout

\begin_layout Standard
CakePHP je open source framework, který poskytuje většinu nástrojů pro snadný
 vývoj webové aplikace a
\begin_inset space ~
\end_inset

dává větší příležitost věnovat se návrhu schématu a
\begin_inset space ~
\end_inset

logiky aplikace 
\begin_inset CommandInset citation
LatexCommand cite
key "CakePHP"

\end_inset

.
\end_layout

\begin_layout Description
MVC
\begin_inset CommandInset label
LatexCommand label
name "mvc"

\end_inset

 
\emph on
Model-View-Controller
\emph default
 (Model-Pohled-Řadič) - softwarová architektura oddělující data, uživatelské
 rozhraní a
\begin_inset space ~
\end_inset

logiku aplikace
\begin_inset CommandInset citation
LatexCommand cite
key "MVC"

\end_inset

.
 Výsledný kód aplikace se stává přehlednějším a
\begin_inset space ~
\end_inset

umožňuje změnu libovolné komponenty s
\begin_inset space ~
\end_inset

minimálními dopady na
\begin_inset space ~
\end_inset

ostatní části aplikace (např.
 změna databáze, výstup v XML či jiném formátu, ovládání přes webové rozhraní
 nebo konzoli).
\begin_inset Float figure
placement bh
wide false
sideways false
status open

\begin_layout Description
\begin_inset Graphics
	filename basic_mvc.png
	lyxscale 80
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Diagram-MVC-dotazu"

\end_inset

Diagram MVC dotazu 
\begin_inset CommandInset citation
LatexCommand cite
key "MVC"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Newline newline
\end_inset

Obrázek 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Diagram-MVC-dotazu"

\end_inset

 zobrazuje základní schéma procesu zpracování požadavku klienta.
 Klient pošle (1) požadavek na URL
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Uniform Resource Locator
\emph default
 (jednotný lokátor zdrojů) popisuje sémantiku a
\begin_inset space ~
\end_inset

syntaxi řetězce znaků sloužící k
\begin_inset space ~
\end_inset

přesné specifikaci zdroje informací v
\begin_inset space ~
\end_inset

prostředí Internetu 
\begin_inset CommandInset citation
LatexCommand cite
key "RFC1738"

\end_inset

.
\end_layout

\end_inset

, které je plánovačem (
\emph on
Dispatcher
\emph default
) zkontrolováno a
\begin_inset space ~
\end_inset

předáno (2) správnému přepínači (
\emph on
Controller
\emph default
).
 Ten se na
\begin_inset space ~
\end_inset

základě parametrů, které obdrží od
\begin_inset space ~
\end_inset

plánovače, rozhodne o
\begin_inset space ~
\end_inset

spuštění správné akce a
\begin_inset space ~
\end_inset

předání parametrů.
 V
\begin_inset space ~
\end_inset

řadiči je obsažena vlastní aplikační logika (včetně např.
 kontroly přihlášení a
\begin_inset space ~
\end_inset

práv uživatele), která může využívat modely pro přístup k
\begin_inset space ~
\end_inset

uloženým datům a
\begin_inset space ~
\end_inset

jejich modifikaci (3
\begin_inset space ~
\end_inset

a
\begin_inset space ~
\end_inset

4).
 Až řadič získá všechna potřebná data, předá (5) je zbývající vrstvě - pohledu
 (
\emph on
View
\emph default
).
 V té jsou data zformátována do
\begin_inset space ~
\end_inset

požadované podoby a
\begin_inset space ~
\end_inset

odeslána (6) klientovi.
\end_layout

\begin_layout Description
ORM 
\emph on
Object-relational mapping
\emph default
 (objektově relační mapování) - programátorská technika určená pro konverzi
 dat mezi nekompatibilními systémy určenými pro ukládání dat a
\begin_inset space ~
\end_inset

objektově orientovanými jazyky
\begin_inset CommandInset citation
LatexCommand cite
key "ORM"

\end_inset

.
 Největší výhoda tedy spočívá v odstínění způsobu práce s
\begin_inset space ~
\end_inset

odlišnými zdroji dat.
 Ať už jde o
\begin_inset space ~
\end_inset

různé relačními databáze (MySQL, PostgreSQL, Oracle, MS-SQL) nebo dokonce
 vlastní definované zdroje dat.
 Mezi ty mohou patřit formátované soubory (CSV, XML, JSON) nebo síťové služby
 poskytující informace skrze veřejné API (LDAP
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Lightweight Directory Access Protocol
\emph default
, 
\begin_inset Quotes pld
\end_inset

odlehčený
\begin_inset Quotes prd
\end_inset

 protokol pro ukládání a přístup k datům na adresářovém serveru odvozený
 od X.500
\end_layout

\end_inset

, Twitter, IMAP a
\begin_inset space ~
\end_inset

další).
\end_layout

\begin_layout Standard
Mezi další výhody, které CakePHP nabízí, patří SEO optimalizace stránek,
 podpora i18n
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\noindent
\begin_inset Quotes pld
\end_inset

Příprava aplikace na podporu různých kulturních zvyklostí.
\begin_inset Quotes prd
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "i18n"

\end_inset


\end_layout

\end_inset

 i
\begin_inset space ~
\end_inset

l10n
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\noindent
\begin_inset Quotes pld
\end_inset

Doplnění aplikace o data specifická pro konkrétní národní prostředí
\begin_inset Quotes prd
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "l10n"

\end_inset


\end_layout

\end_inset

 pro tvorbu vícejazyčných aplikací.
 Kód je již zapracován do jádra frameworku a
\begin_inset space ~
\end_inset

otestován komunitou, díky které není potřeba psát již jednou napsané části,
 ale je možné šetřit lidské zdroje na vlastní vývoj aplikační logiky.
\end_layout

\begin_layout Standard
CakePHP zastává programátorskou filosofii 
\emph on
DRY
\emph default
 - 
\emph on
Don't Repeat Yourself
\emph default
 zdůrazňující, že jednotlivé části kódu by se v
\begin_inset space ~
\end_inset

programu neměly opakovat, jelikož se snižuje srozumitelnost kódu.
 Navíc se při modifikaci musí upravovat stejný kód na více místech, což
 často vede k nesnadno odhalitelným chybám programu.
 K
\begin_inset space ~
\end_inset

tomuto účelu se používají 
\begin_inset Quotes pld
\end_inset

pomocníci
\begin_inset Quotes prd
\end_inset

 (
\emph on
helpers
\emph default
) a
\begin_inset space ~
\end_inset

komponenty (
\emph on
components
\emph default
).
 Při potřebě změny je lze snadno upravit, bez potřeby zásahu do míst odkud
 jsou voláni.
\end_layout

\begin_layout Standard
Za největší přínos samotného frameworku v počátku návrhu aplikace je považována
 
\begin_inset Quotes pld
\end_inset

pekárna
\begin_inset Quotes prd
\end_inset

 kódu (
\emph on
baker
\emph default
) a
\begin_inset space ~
\end_inset

podpora 
\begin_inset Quotes pld
\end_inset

lešení
\begin_inset Quotes prd
\end_inset

 (
\emph on
scaffolding
\emph default
), které umožňují pracovat s
\begin_inset space ~
\end_inset

automaticky generovaným rozhraním podporujícím CRUD.
 
\begin_inset Quotes pld
\end_inset

Pekárna
\begin_inset Quotes prd
\end_inset

 kódu (
\emph on
bakery
\emph default
) umí vygenerovat modely i
\begin_inset space ~
\end_inset

s
\begin_inset space ~
\end_inset

validačními kritérii, prezentační vrstvu a
\begin_inset space ~
\end_inset

řadiče.
 Navíc sama najde relace mezi tabulkami a
\begin_inset space ~
\end_inset

přidá tuto informaci do odpovídajícího modelu.
\end_layout

\begin_layout Standard
Hledání relací
\begin_inset CommandInset label
LatexCommand label
name "Hledání-relací"

\end_inset

 probíhá na základě názvů tabulek a jejich atributů.
 Proto je doporučeno při práci s
\begin_inset space ~
\end_inset

CakePHP dodržovat následující konvence, které nejsou nijak závazné a jdou
 změnit v definici každého modelu.
\end_layout

\begin_layout Itemize
Názvy tabulek jsou pojmenované anglicky v plurálu.
 Nepravidelné skloňování nebo definice plurálu pro jiný jazyk lze nastavit
 v
\begin_inset space ~
\end_inset

souboru 
\emph on
app/config/inflections.php.
\end_layout

\begin_layout Itemize
Cizí klíče se jmenují stejně jako tabulka v
\begin_inset space ~
\end_inset

jednotném čísle a
\begin_inset space ~
\end_inset

končí na 
\begin_inset Quotes pld
\end_inset

_id
\begin_inset Quotes prd
\end_inset


\end_layout

\begin_layout Itemize
Primární klíč má název 
\begin_inset Quotes pld
\end_inset

id
\begin_inset Quotes prd
\end_inset

.
\end_layout

\begin_layout Standard
Díky těmto úsporám je možné se zaměřit na ergonomii dané aplikace a
\begin_inset space ~
\end_inset

její možnou optimalizaci, která je bohužel limitována výkonností použitého
 skriptovacího jazyka.
 Tato omezení lze minimalizovat tzv.
 kešováním
\begin_inset Foot
status open

\begin_layout Plain Layout

\emph on
cache
\emph default
 [keš], označuje vyrovnávací paměť
\end_layout

\end_inset

 částí zpracovaného zdrojového kódu v paměti, jeho předkompilací popřípadě
 jedná-li se o statické stránky lze ukládat výstup skriptu, který je při
 následujícím stejném požadavku vrácen klientovi.
\end_layout

\begin_layout Standard
Další možnou optimalizací, která sice přímo nesouvisí s CakePHP, ale je
 v něm snadno implementovatelná, je snížení počtu požadavků na stránku.
 S používáním JavaScriptových frameworků a knihoven se snadno může stát,
 že počet vkládaných odkazů na skripty a
\begin_inset space ~
\end_inset

kaskádové styly (CSS) se vyšplhá až k
\begin_inset space ~
\end_inset

desítkám a
\begin_inset space ~
\end_inset

začne se neúměrně prodlužovat doba potřebná na stažení všech potřebných
 částí.
 Zvyšuje se tak počet požadavků na server a díky režii protokolu HTTP
\begin_inset Foot
status open

\begin_layout Plain Layout

\emph on
HyperText Transfer Protocol
\emph default
, internetový protokol určený pro výměnu dokumentů
\end_layout

\end_inset

 je ve výsledku stažen větší objem dat.
 Tento problém úspěšně řeší projekty 
\emph on
JSMin
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://code.google.com/p/jsmin-php/"

\end_inset


\end_layout

\end_inset

 a 
\emph on
CSSTidy
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://csstidy.sourceforge.net/"

\end_inset


\end_layout

\end_inset

.
\end_layout

\begin_layout Subsubsection
JSMin
\end_layout

\begin_layout Standard
JSMin je optimalizátor JavaScriptového kódu používaný pro zmenšení velikosti.
 Odstraňuje všechny komentáře a nepotřebné bílé znaky, tj.
 mezery, tabulátory a konce řádek.
 Výsledný soubor použitý v této práci obvykle dosahuje 60-70% původní velikosti.
 Jiné optimalizátory (např.
 JSMinPlus) používající ke své práci parser JavaScriptu mohou dosahovat
 lepších výsledků zkracováním jmen lokálních proměnných a funkcí (metod).
\end_layout

\begin_layout Subsubsection
CSSTidy
\end_layout

\begin_layout Standard
CSSTidy je parser a
\begin_inset space ~
\end_inset

optimalizátor kaskádových stylů.
 Umožňuje formátování a
\begin_inset space ~
\end_inset

komprimaci CSS až do verze 2.1.
 Výhodou je, že na rozdíl od jiných optimalizátorů neodstraňuje pouze nadbytečné
 bílé znaky a komentáře, ale umí rovněž spojovat jednotlivé definice stylů
 (např.
 spojuje definované atributy pozadí do jednoho záznamu).
\end_layout

\begin_layout Subsection
MySQL
\end_layout

\begin_layout Standard
MySQL je multiplatformní systém pro řízení báze dat (DBMS, zkráceně databázový
 systém), který poskytuje všechny potřebné vlastnosti nutné pro běh tohoto
 informačního systému:
\end_layout

\begin_layout Itemize
indexy, fulltext
\end_layout

\begin_layout Itemize
cizí klíče (foreign-keys)
\end_layout

\begin_layout Itemize
poddotazy (subselect)
\end_layout

\begin_layout Itemize
pohledy (views)
\end_layout

\begin_layout Itemize
transakce
\end_layout

\begin_layout Itemize
triggery
\end_layout

\begin_layout Standard
Systém byl původně vyvinut Michaelem Wideniusem a
\begin_inset space ~
\end_inset

Davidem Axmarkem v
\begin_inset space ~
\end_inset

roce 1994, kteří se podíleli na založení firmy MySQL AB.
 Ta byla až do roku 2008, kdy byla provedena akvizice s
\begin_inset space ~
\end_inset

firmou Sun Microsystems, jednou z
\begin_inset space ~
\end_inset

největších open source společností na světě.
 MySQL je nabízeno jak pod bezplatnou licencí, tak pod komerční licencí
 s
\begin_inset space ~
\end_inset

plnou technickou podporou 
\begin_inset CommandInset citation
LatexCommand cite
key "MySQL"

\end_inset

.
 
\end_layout

\begin_layout Standard
Těší se velké oblibě hlavně mezi vývojáři webových aplikací, kde je součástí
 platformy označované jako 
\emph on
LAMP
\emph default
, která obsahuje 
\emph on
Linux
\emph default
, 
\emph on
Apache
\emph default
, 
\emph on
MySQL
\emph default
 a 
\emph on
PHP
\emph default
.
 Obecně jednotlivé části mohou být zaměněny (např.
 PHP za Perl nebo Python, MySQL za PostgreSQL) při zachování zkratky, která
 je zaužívaným označením pro operační systém, webový server, databázový
 systém a
\begin_inset space ~
\end_inset

skriptovací jazyk sloužící k
\begin_inset space ~
\end_inset

obsluze a generování webových stránek.
\end_layout

\begin_layout Section
Klient
\end_layout

\begin_layout Standard
Pro vlastní běh aplikační logiky je možné se spolehnout na to, že serverová
 část aplikace bude zpracována jednou verzí PHP interpretu v uzavřeném,
 neměnném a
\begin_inset space ~
\end_inset

otestovaném prostředí.
 Naproti tomu klientská část bude prezentována na odlišných operačních systémech
 v
\begin_inset space ~
\end_inset

mnoha prohlížečích nejrůznějších verzích.
 
\end_layout

\begin_layout Standard
Aplikace je primárně vyvíjena pro nejnovější verze nejpoužívanějších 
\emph on
volně dostupných
\emph default
 prohlížečů dodržujících standardy (doporučení) konsorcia W3C.
 Mezi podporované prohlížeče patří Mozilla Firefox 3.5, Opera 9, Google Chrome,
 Safari a
\begin_inset space ~
\end_inset

další založené na vykreslovacím jádře Webkit nebo Gecko.
\end_layout

\begin_layout Standard
Základními požadavky kladené na prohlížeč jsou:
\end_layout

\begin_layout Itemize

\emph on
XHTML 1.0
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.w3.org/TR/xhtml1/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\emph on
CSS 2.1
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.w3.org/TR/CSS2/"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Itemize

\emph on
JavaScript
\emph default
 je dialektem ECMAScriptu.
 Minimálním implementovaným standardem by měl být ECMA-262, revize 3 
\begin_inset CommandInset citation
LatexCommand cite
key "ECMA-262"

\end_inset

.
\end_layout

\begin_layout Standard
S XHTML a
\begin_inset space ~
\end_inset

CSS prohlížeče problémy nemívají.
 Horší je to, ale s
\begin_inset space ~
\end_inset

implementacemi JavaScriptu, které se mezi prohlížeči dost liší.
 Tento problém byl vyřešen díky provázanosti CakePHP s
\begin_inset space ~
\end_inset

JavaScriptovým frameworkem 
\emph on
Prototype
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Aktuální verzi naleznete na
\begin_inset CommandInset href
LatexCommand href
target "http://www.prototypejs.org/"

\end_inset


\end_layout

\end_inset

 a
\begin_inset space ~
\end_inset

jeho rozšířením 
\emph on
Scriptaculous
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Knihovna se nachází na 
\begin_inset CommandInset href
LatexCommand href
target "http://script.aculo.us"

\end_inset


\end_layout

\end_inset

.
 Dohromady snaží zakrýt rozdíly mezi prohlížeči a zpříjemnit uživateli pracovní
 prostředí pomocí vizuálních efektů.
\end_layout

\begin_layout Subsection
Prototype
\end_layout

\begin_layout Standard

\emph on
Prototype
\emph default
 není jediným či nejlepším frameworkem.
 Existují i
\begin_inset space ~
\end_inset

jiné, které mají rozsáhlejší schopnosti v
\begin_inset space ~
\end_inset

oblasti tvorby
\begin_inset space ~
\end_inset

GUI
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Graphical User Interface
\emph default
, uživatelské prostředí umožňující uživateli ovládání aplikace pomocí grafických
 prvků.
\end_layout

\end_inset

 nebo používaní dotazovacího jazyka XPath.
 Mezi hojně využívané patří 
\emph on
JQuery
\emph default
, 
\emph on
MooTools
\emph default
, 
\emph on
Yahoo User Interface Library
\emph default
 a
\begin_inset space ~
\end_inset


\emph on
Dojo
\emph default
.
 Nelze říct, že by jeden z nich byl o
\begin_inset space ~
\end_inset

mnoho lepší, a
\begin_inset space ~
\end_inset

proto si každý vývojář musí stanovit, co od frameworku sám očekává.
 Pomoci s
\begin_inset space ~
\end_inset

výběrem může několik výkonnostních testů, jenž lze nalézt v
\begin_inset space ~
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "slicktest"

\end_inset

.
\end_layout

\begin_layout Standard
Jak už bylo zmíněno výše, 
\emph on
Prototype
\emph default
 je skvěle provázán s
\begin_inset space ~
\end_inset

CakePHP, který tak programátorovi umožňuje psát kód pouze v
\begin_inset space ~
\end_inset

jednom programovacím jazyce - PHP.
 Kromě rozšíření 
\emph on
Scriptaculous
\emph default
, je v
\begin_inset space ~
\end_inset

systému použita i
\begin_inset space ~
\end_inset

knihovna 
\emph on
Livepipe
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Dokumentace a stažení knihovny je možné z 
\begin_inset CommandInset href
LatexCommand href
target "http://livepipe.net"

\end_inset

.
\end_layout

\end_inset

, která se zaměřuje hlavně na tvorbu uživatelského rozhraní - záložky, okna
 a
\begin_inset space ~
\end_inset

další prvky známé z
\begin_inset space ~
\end_inset

klasických aplikací.
\end_layout

\begin_layout Chapter
Programátorská dokumentace
\end_layout

\begin_layout Standard
V následující kapitole je popsána základní adresářová struktura projektu,
 propojení databázového schématu s
\begin_inset space ~
\end_inset

třídami a
\begin_inset space ~
\end_inset

metody použitých tříd.
 Pro kompletní dokumentaci všech jaderných metod a plné pochopení fungování
 frameworku CakePHP je vhodné si nejprve nastudovat 
\begin_inset CommandInset citation
LatexCommand cite
key "CakePHP"

\end_inset

.
 Dále jsou vysvětleny jen nejdůležitější části a
\begin_inset space ~
\end_inset

změny v
\begin_inset space ~
\end_inset

jaderných metodách frameworku.
 Vygenerovaná dokumentace k
\begin_inset space ~
\end_inset

API je k
\begin_inset space ~
\end_inset

dispozici na přiloženém CD-ROMu.
\end_layout

\begin_layout Section
Adresářová struktura
\end_layout

\begin_layout Standard
Kód aplikace je logicky rozčleněn podle původu do 3 hlavních složek.
 Při pojmenovávání souborů ve složkách je dobré se řídit zavedenými konvencemi
 v
\begin_inset space ~
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "CakePHP"

\end_inset

.
\end_layout

\begin_layout Itemize

\emph on
app
\emph default
 - vlastní kód aplikace
\end_layout

\begin_deeper
\begin_layout Itemize

\emph on
config
\emph default
 - konfigurační soubory (nastavení databáze, přepisování URL a
\begin_inset space ~
\end_inset

ostatní konstanty)
\end_layout

\begin_layout Itemize

\emph on
controllers
\emph default
 - řadiče a komponenty
\end_layout

\begin_layout Itemize

\emph on
locale
\emph default
 - obsahuje podadresáře s
\begin_inset space ~
\end_inset

přeloženými řetězci použitými v
\begin_inset space ~
\end_inset

aplikaci
\end_layout

\begin_layout Itemize

\emph on
models
\emph default
 - modely, doplňková chování a
\begin_inset space ~
\end_inset

definice zdrojů dat
\end_layout

\begin_layout Itemize

\emph on
plugins
\emph default
 - zásuvné moduly a znovupoužitelné balíky
\end_layout

\begin_layout Itemize

\emph on
tmp
\emph default
 - zapisovatelná složka pro ukládání dočasných souborů
\end_layout

\begin_layout Itemize

\emph on
views
\emph default
 - šablony, elementy a
\begin_inset space ~
\end_inset

prezentační data
\end_layout

\begin_layout Itemize

\emph on
webroot
\emph default
 - kaskádové styly, JavaScriptové knihovny a
\begin_inset space ~
\end_inset

obrázky
\end_layout

\end_deeper
\begin_layout Itemize

\emph on
cake
\emph default
 - zdrojové kódy frameworku, do kterých by se nemělo zasahovat
\end_layout

\begin_layout Itemize

\emph on
vendors
\emph default
 - knihovny třetích stran použité v systému (TCPDF, CSSTidy, JSMin)
\end_layout

\begin_layout Section
Modely (
\emph on
Models
\emph default
)
\end_layout

\begin_layout Standard
Všechny modely v aplikaci jsou odvozeny od třídy 
\emph on
Object
\emph default
, která je zakryta třídou 
\emph on
Overloadable
\emph default
.
 Ta je navržena tak, aby zakryla rozdíly mezi PHP verze 4 a 5.
 
\end_layout

\begin_layout Standard
Modely jsou částečně determinovány návrhem databáze.
 Relace mezi jednotlivými modely odpovídají relacím v databázi a
\begin_inset space ~
\end_inset

je možné je upravovat ve vlastnostech dané třídy.
 Existují čtyři druhy relací, jenž jdou v CakePHP modelovat.
 Relace 1:1 (
\emph on
hasOne
\emph default
), 1:N (
\emph on
hasMany
\emph default
) a
\begin_inset space ~
\end_inset

N:1 (
\emph on
belongsTo
\emph default
) mají většinu nastavení společnou:
\end_layout

\begin_layout Description
className jméno třídy asociovaného modelu 
\end_layout

\begin_layout Description
foreignKey jméno cizího klíče v asociovaném modelu
\end_layout

\begin_layout Description
fields seznam polí, jenž mají být načteny při použití dané asociace
\end_layout

\begin_layout Description
order část SQL dotazu sloužící k
\begin_inset space ~
\end_inset

definici pořadí výsledků
\end_layout

\begin_layout Description
conditions část SQL dotazu sloužící k
\begin_inset space ~
\end_inset

filtraci nalezených výsledků
\end_layout

\begin_layout Standard
Při modelování relace M:N (
\emph on
hasAndBelongsToMany - HABTM
\emph default
) je potřeba nadefinovat tabulku (
\emph on
joinTable
\emph default
), přes kterou bude prováděno spojení nalezených dat, a
\begin_inset space ~
\end_inset

cizí klíč do asociované tabulky (
\emph on
associationForeignKey
\emph default
).
\end_layout

\begin_layout Standard
Při použití 
\begin_inset Quotes pld
\end_inset

pekárny
\begin_inset Quotes prd
\end_inset

 kódu jsou relace vyhledány automaticky podle pravidel popsaných v 
\begin_inset CommandInset ref
LatexCommand vref
reference "Hledání-relací"

\end_inset

.
\end_layout

\begin_layout Standard
Pro získání dat se používá metoda 
\emph on
find($typ, $parametry)
\emph default
 na příslušném modelu.
 První parametr určuje typ dotazu, který může být jedním z následujících:
\end_layout

\begin_layout Description
all najde všechna data splňující podmínky definované ve druhém parametru
\end_layout

\begin_layout Description
first najde první záznam vyhovující podmínkám (liší se od předcházejícího
 ve struktuře vráceného pole)
\end_layout

\begin_layout Description
count vrátí počet vyhovujících záznamů
\end_layout

\begin_layout Description
list vygeneruje pole s hodnotami ze sloupce tabulky definované v
\begin_inset space ~
\end_inset

atributu 
\emph on
displayField
\emph default
 daného modelu indexované standardně primárním klíčem
\end_layout

\begin_layout Description
threaded vygeneruje vnořené pole podle zadaného intervalu (
\emph on
ltf 
\emph default
- 
\emph on
rght
\emph default
)
\begin_inset Foot
status open

\begin_layout Plain Layout
Detailní popis příkladu, jak uchovávat stromové struktury v relační můžete
 nalézt na 
\begin_inset CommandInset href
LatexCommand href
target "http://dev.mysql.com/tech-resources/articles/hierarchical-data.html"

\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Description
neighbors vrátí položku před (
\emph on
prev
\emph default
) a za (
\emph on
next
\emph default
) položkou, která by byla nalezena pomocí 
\emph on
find('first', $podminky)
\end_layout

\begin_layout Standard
Pole s vyhledávacími podmínkami může vypadat jako v následujícím příkladu,
 kde jsou uvedeny všechny základní možnosti.
 Další parametry mohou být přidávány pro doplňkové rozšíření chování jednotlivýc
h modelů.
 
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\small\ttfamily},tabsize=2"
inline false
status open

\begin_layout Plain Layout

array(
\end_layout

\begin_layout Plain Layout

	'conditions' => array('Model.field' => $thisValue), 
\end_layout

\begin_layout Plain Layout

	//vygeneruje klauzuli WHERE Model.field = $thisValue
\end_layout

\begin_layout Plain Layout

	'recursive' => 1, //int
\end_layout

\begin_layout Plain Layout

	'fields' => array('Model.field1'),
\end_layout

\begin_layout Plain Layout

	//sloupečky v dotazu SELECT
\end_layout

\begin_layout Plain Layout

	'order' => array('Model.created', 'Model.field3' => 'DESC'),
\end_layout

\begin_layout Plain Layout

	//definice klauzule ORDER BY
\end_layout

\begin_layout Plain Layout

	'group' => array('Model.field'), 
\end_layout

\begin_layout Plain Layout

	//sloupečky použité v klauzuli GROUP BY
\end_layout

\begin_layout Plain Layout

	'limit' => n, 
\end_layout

\begin_layout Plain Layout

	//počet záznamů na stránku
\end_layout

\begin_layout Plain Layout

	'page' => i, //najdi i-tou stranu
\end_layout

\begin_layout Plain Layout

	'callbacks' => true 
\end_layout

\begin_layout Plain Layout

	//možné hodnoty jsou: false, 'before', 'after' 
\end_layout

\begin_layout Plain Layout

)
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Zajímavým parametrem je 
\emph on
recursive
\emph default
, který určuje do jaké hloubky mají být načítána data.
 Pokud data z
\begin_inset space ~
\end_inset

asociovaných modelů nejsou potřeba, je vhodné jej nastavit na 
\emph on
-1
\emph default
.
\end_layout

\begin_layout Standard
V systému, kde je potřeba vyhledávat sdružovat data podle modelů, jenž jsou
 v
\begin_inset space ~
\end_inset

řetězci asociací dále, bylo výchozí chování parametru nedostatečné.
 Naštěstí existují rozšiřující chování modelu, které takové činnosti umožňují.
\end_layout

\begin_layout Subsection
Rozšíření chování modelů (
\emph on
Behaviors
\emph default
)
\end_layout

\begin_layout Standard
V základní výbavě CakePHP je obsaženo rozšíření 
\emph on
Containable
\emph default
, které umožňuje dynamicky přidávat asociované modely bez omezení hloubky
 rekurze
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Je ovšem potřeba vzít na vědomí, že CakePHP tak vygeneruje značné množství
 dotazů, které mohou mít negativní vliv na výkon dané aplikace.
\end_layout

\end_inset

.
 Je to ale pouze 
\begin_inset Quotes pld
\end_inset

syntaktický cukr
\begin_inset Quotes prd
\end_inset

 k
\begin_inset space ~
\end_inset

metodám 
\emph on
bindModel()
\emph default
 a 
\emph on
unbindModel()
\emph default
, které umožňují přidávat a odebírat asociace příslušící danému modelu.
 
\emph on
Containtable
\emph default
 přidává modelu metodu 
\emph on
contain()
\emph default
, jenž je volána i pokud je nalezen index 
\begin_inset Quotes pld
\end_inset

contain
\begin_inset Quotes prd
\end_inset

 v
\begin_inset space ~
\end_inset

poli s vyhledávacími parametry metody 
\emph on
find()
\emph default
.
 Ta se postará o
\begin_inset space ~
\end_inset

dynamickou asociaci potřebných modelů.
\end_layout

\begin_layout Standard
Také výše zmíněné rozšíření má určité nedostatky a to hlavně pokud je potřeba
 filtrovat data podle modelů asociovaných ve větší hloubce.
 Proto je použité rozšíření 
\emph on
Linkable
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "linkable"

\end_inset

, které má obdobnou syntaxi nastavení, ale vytváří pouze jeden SQL dotaz
 za pomocí klauzulí JOIN.
\end_layout

\begin_layout Standard
Pro usnadnění práce s relacemi typu M:N přes tabulku s
\begin_inset space ~
\end_inset

klíči je použito rozšíření 
\emph on
Extend Associations
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "ExtendAssoc"

\end_inset

.
 To umožňuje jednoduché přidání nebo smazání asociací, bez ovlivnění již
 existujících záznamů.
 K
\begin_inset space ~
\end_inset

tomu slouží nově definovaná sada metod:
\end_layout

\begin_layout Itemize

\emph on
habtmAdd(&$model,
\begin_inset space ~
\end_inset

$assoc,
\begin_inset space ~
\end_inset

$id,
\begin_inset space ~
\end_inset

$assoc_ids
\emph default
) - přidá asociace k
\begin_inset space ~
\end_inset

danému záznamu v modelu
\end_layout

\begin_layout Itemize

\emph on
habtmDelete(&$model,
\begin_inset space ~
\end_inset

$assoc,
\begin_inset space ~
\end_inset

$id,
\begin_inset space ~
\end_inset

$assoc_ids)
\emph default
 - smaže asociace s
\begin_inset space ~
\end_inset

danou kombinací klíčů
\end_layout

\begin_layout Itemize

\emph on
habtmDeleteAll(&$model,
\begin_inset space ~
\end_inset

$assoc,
\begin_inset space ~
\end_inset

$id)
\emph default
 - smaže všechny asociace k
\begin_inset space ~
\end_inset

danému záznamu modelu
\end_layout

\begin_layout Standard
Pro překlady do cizích jazyků bylo použito rozšíření 
\emph on
Translate
\emph default
, které umožňuje nadefinovat seznam sloupců tabulky, které mají být překládány.
 Přeložená data jsou ukládána v
\begin_inset space ~
\end_inset

oddělené tabulce (
\emph on
i18n
\emph default
 - lze změnit v
\begin_inset space ~
\end_inset

konfiguraci pro každý model) a
\begin_inset space ~
\end_inset

při dotazu je vytvořeno spojení s
\begin_inset space ~
\end_inset

touto tabulkou pomocí složeného klíče - jméno modelu, cizí klíč daného modelu
 a
\begin_inset space ~
\end_inset

jméno překládaného sloupce.
\end_layout

\begin_layout Standard
A pro úplnost jsou zde uvedeny zbývající rozšíření použité v
\begin_inset space ~
\end_inset

aplikaci, které zatím nejsou součástí základních knihoven frameworku.
\end_layout

\begin_layout Description
Slugable Vytváří texty použitelné v URL z
\begin_inset space ~
\end_inset

definovaných sloupců.
\end_layout

\begin_layout Description
Versionable Ukládá aktuální verzi záznamu před změnou či smazáním.
\end_layout

\begin_layout Description
Logable Zaznamenává akce uživatelů.
\end_layout

\begin_layout Subsection
Úpravy základních metod 
\emph on
AppModel
\end_layout

\begin_layout Standard
Jelikož je kontrola konzistence dat po přidání, smazání a editaci záznamu
 ponechána na databázi, bylo potřeba zajistit zpracování chybových hlášení
 z
\begin_inset space ~
\end_inset

databáze.
 To se děje v metodě 
\emph on
onError()
\emph default
, která je volána pokaždé, když metoda 
\emph on
DboSource::execute()
\emph default
 vrátí chybu.
 V
\begin_inset space ~
\end_inset

našem případě je chyba zpracována a
\begin_inset space ~
\end_inset

chybové hlášení je uloženo pro pozdější prezentaci uživateli.
\end_layout

\begin_layout Standard
Pro plnou lokalizaci aplikace bylo potřeba rozšířit metodu 
\emph on
invalidate($záznam, $chybovéHlášení)
\emph default
 o
\begin_inset space ~
\end_inset

překlad chybového hlášení, pokud daný záznam neprošel validací.
 Lokalizaci lze rovněž provádět při generování pohledu, ale to se z
\begin_inset space ~
\end_inset

hlediska údržby kódu nejeví jako nejvhodnější řešení.
\end_layout

\begin_layout Section
Řadiče (
\emph on
Controllers
\emph default
)
\end_layout

\begin_layout Standard
Řadiče jsou používané ke správě aplikační logiky.
 Pro možnost používat stejný kus kódu v
\begin_inset space ~
\end_inset

různých řadičích je vhodné používat komponenty.
 Tyto komponenty usnadňují autentizaci, autorizaci uživatelů, vyhledávání
 v
\begin_inset space ~
\end_inset

databázi, posílání emailů nebo validaci uživatelských formulářů.
\end_layout

\begin_layout Subsection
Komponenty
\end_layout

\begin_layout Standard
Komponenty se v CakePHP obecně používají ke sdílení logiky (kódu) mezi různými
 řadiči tak, aby byla zachována filozofie 
\emph on
DRY
\emph default
.
\end_layout

\begin_layout Description
Auth/Authmd5 Standardní knihovna přidává k
\begin_inset space ~
\end_inset

heslu řetězec definovaný v
\begin_inset space ~
\end_inset


\emph on
app/config/core.php
\emph default
 v
\begin_inset space ~
\end_inset

interní proměnné 
\emph on
Security.salt
\emph default
.
 Tato vlastnost byla v
\begin_inset space ~
\end_inset

systému na obtíž, hlavně kvůli přenositelnosti již zadaných hesel v
\begin_inset space ~
\end_inset

předchozí aplikaci.
 Zároveň je ale 
\emph on
Security.salt
\emph default
 používán pro šifrování cookies
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Označení pro data v protokolu HTTP uložená v počítači uživatele, která prohlížeč
 obdržel od WWW serveru a
\begin_inset space ~
\end_inset

při každé další komunikaci je posílá zpět.
\end_layout

\end_inset

 a
\begin_inset space ~
\end_inset

sessions, takže by neměl zůstat prázdný.
 Proto byla vytvořena komponenta 
\emph on
Authmd5
\emph default
, která nepřidává zabezpečovací řetězec k
\begin_inset space ~
\end_inset

heslu.
 Další drobnou změnou oproti původní komponentě je automatické 
\begin_inset Quotes pld
\end_inset

hašovaní
\begin_inset Quotes prd
\end_inset

 hesla z
\begin_inset space ~
\end_inset

formuláře, i
\begin_inset space ~
\end_inset

když není zadáno přihlašovací jméno.
\end_layout

\begin_layout Description
P28n Při načtení komponenty se zkontroluje, zda si již uživatel někdy vybral
 vybral jazyk, který byl uložen do cookie pomocí metody 
\emph on
change($lang)
\emph default
.
 Pokud se jazyk v
\begin_inset space ~
\end_inset

cookie nenachází, zvolí se výchozí jazyk aplikace podle proměnné 
\emph on
HTTP_ACCEPT_LANGUAGE
\emph default
, pokud je prohlížečem nastavena.
 V opačném případě je použit jazyk definovaný v konstantě 
\emph on
DEFAULT_LANGUAGE
\emph default
 v
\begin_inset space ~
\end_inset

souboru 
\emph on
app/config/core.php
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "p28n"

\end_inset

.
\end_layout

\begin_layout Description
Password
\begin_inset space ~
\end_inset

Helper Vygeneruje 
\begin_inset Quotes pld
\end_inset

hezké
\begin_inset Quotes prd
\end_inset

 a
\begin_inset space ~
\end_inset

bezpečné heslo zadané délky bez opakujících se znaků.
 Jednotlivé znaky jsou vybírány z
\begin_inset space ~
\end_inset

atributu
\emph on
 possible
\emph default
 dané komponenty 
\begin_inset CommandInset citation
LatexCommand cite
key "pass-gen"

\end_inset

.
\end_layout

\begin_layout Description
Autocomplete Přidává metodu 
\emph on
autocomplete()
\emph default
, která zpracuje získaná data z
\begin_inset space ~
\end_inset

formulářového prvku s
\begin_inset space ~
\end_inset

atributem 
\emph on
name
\emph default
 obsahujícím 
\begin_inset Quotes pld
\end_inset


\emph on
data[Model][položka]
\emph default

\begin_inset Quotes prd
\end_inset

.
 Následně vyhledá vyhovující záznamy a
\begin_inset space ~
\end_inset

vygeneruje seznam s
\begin_inset space ~
\end_inset

výsledky.
 Přidání doplňkových podmínek pro vyhledávání je možné v
\begin_inset space ~
\end_inset

metodě 
\emph on
beforeFilter()
\emph default
 daného řadiče nebo jeho předka.
 Děje se tak nastavením atributu 
\emph on
handles
\emph default
, kde index v
\begin_inset space ~
\end_inset

zadaném poli určuje položky tabulky, kterých se mají podmínky týkat.
 Následující příklad je vybrán z
\begin_inset space ~
\end_inset

řadiče produktů, kde má být zákazníkům umožněno vyhledávat pouze v produktech,
 které se jich přímo týkají.
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily},breaklines=true,tabsize=2"
inline false
status open

\begin_layout Plain Layout

function beforeFilter() {
\end_layout

\begin_layout Plain Layout

	parent::beforeFilter();
\end_layout

\begin_layout Plain Layout

	$this->Autocomplete->handles = false;
\end_layout

\begin_layout Plain Layout

	// standardně je doporučeno vypnutí všech políček
\end_layout

\begin_layout Plain Layout

	if($this->Auth->user()) {
\end_layout

\begin_layout Plain Layout

		if (isset($this->params['prefix']) {
\end_layout

\begin_layout Plain Layout

		// podle prefixu můžeme omezit práva komponentou Auth
\end_layout

\begin_layout Plain Layout

		if ($this->params['prefix'] === 'admin') {
\end_layout

\begin_layout Plain Layout

			$this->Autocomplete->handles = array('Product.*');
\end_layout

\begin_layout Plain Layout

			// administratoři mohou číst všchny položky produktu
\end_layout

\begin_layout Plain Layout

		}
\end_layout

\begin_layout Plain Layout

		if ($this->params['prefix'] === 'customers') {
\end_layout

\begin_layout Plain Layout

			$this->Product->Behaviors->attach('Linkable');
\end_layout

\begin_layout Plain Layout

			// dynamické načtení 
\begin_inset Quotes pld
\end_inset

chování
\begin_inset Quotes prd
\end_inset


\end_layout

\begin_layout Plain Layout

			$this->Autocomplete->handles = array(
\end_layout

\begin_layout Plain Layout

				'Product.name' => array(
\end_layout

\begin_layout Plain Layout

					'link' => array('Application'),
\end_layout

\begin_layout Plain Layout

					'conditions' => array(
\end_layout

\begin_layout Plain Layout

	'Application.user_id' => User::get('id'))
\end_layout

\begin_layout Plain Layout

	// zákazníci mohou vyhledávat pouze v produktech,
\end_layout

\begin_layout Plain Layout

	// kterých se účastní
\end_layout

\begin_layout Plain Layout

			));
\end_layout

\begin_layout Plain Layout

		}         
\end_layout

\begin_layout Plain Layout

	}
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Description
Ajaxupdate Slouží pro usnadnění editace záznamů přes AJAX za podpory JavaScripto
vé knihovny 
\emph on
control.js
\emph default
, která je součástí balíku 
\emph on
Scriptaculous
\emph default
.
\end_layout

\begin_layout Description
Filter Komponenta pro validaci vyhledávacích formulářů a
\begin_inset space ~
\end_inset

vygenerování podmínek pro vyhledávání.
\end_layout

\begin_layout Description
Email Slouží k odesílání emailů.
 Lze používat šablony a
\begin_inset space ~
\end_inset

přidávat přílohy.
\end_layout

\begin_layout Description
Request
\begin_inset space ~
\end_inset

Handler Detekuje typ požadavku podle odeslané hlavičky.
\end_layout

\begin_layout Subsection
Popis řadičů (
\emph on
Controllers
\emph default
)
\end_layout

\begin_layout Standard
V této části budou popsány 
\emph on
nejdůležitější
\emph default
 části aplikační logiky.
 Při vytváření základní kostry byla použita 
\begin_inset Quotes pld
\end_inset

pekárna
\begin_inset Quotes prd
\end_inset

 kódu, jejíž vygenerovaný kód byl posléze upraven.
\end_layout

\begin_layout Subsubsection
Uživatelé
\end_layout

\begin_layout Standard
Nejdůležitějšími akcemi jsou bezpochyby přihlášení a odhlášení uživatele.
 Ty jsou zajištěny komponentou 
\emph on
Auth
\emph default
, která se nastavuje v metodě 
\emph on
beforeFilter()
\emph default
 řadiče aplikace (
\emph on
AppController
\emph default
) .
\end_layout

\begin_layout Description
login() Po přihlášení je aktualizována položka 
\begin_inset Quotes pld
\end_inset

poslední přihlášení
\begin_inset Quotes prd
\end_inset

 v
\begin_inset space ~
\end_inset

databázi, nastavena zpráva uživateli a
\begin_inset space ~
\end_inset

uživatel je přesměrován na
\begin_inset space ~
\end_inset

požadovanou nebo výchozí stránku.
\end_layout

\begin_layout Description
logout() Smaže cookie, nastaví zprávu o úspěšném odhlášení a přesměruje
 na výchozí stránku.
\end_layout

\begin_layout Description
account() Slouží ke změně hesla uživatele.
 Pokud poslaná data z
\begin_inset space ~
\end_inset

formuláře projdou validací, je uživateli nastaveno nové heslo.
\end_layout

\begin_layout Description
recover() Uživatel si může nechat zaslat nové heslo po zadání emailu.
 Je vytvořen token s platností 1 den.
 V budoucnu by bylo dobré rozšířit metodu o
\begin_inset space ~
\end_inset

možnost obnovy hesla po zadání odpovědi na kontrolní otázku.
\end_layout

\begin_layout Description
verify($token) Zkontroluje zda se zadaný token nachází v databázi a pokud
 ano, zašle uživateli nově vygenerované heslo.
\end_layout

\begin_layout Description
register() Jednoduchá registrace uživatele po jejímž dokončení je uživateli
 zaslán aktivační email.
\end_layout

\begin_layout Standard
Výše uvedené akce jsou povoleny i nepřihlášeným uživatelům pomocí metody
 
\emph on
Auth::allow($akce)
\emph default
.
\end_layout

\begin_layout Description
admin_account($id) Umožní administrátorovi změnit heslo uživateli s daným
 id bez znalosti starého.
\end_layout

\begin_layout Description
admin_reset_password($id) Vygeneruje uživateli s daným id náhodné heslo
 a zašle ho uživateli na email zadaný při registraci.
\end_layout

\begin_layout Description
admin_invoiceattachment() Jakmile jsou vyplněny informace o poskytovateli,
 zákazníkovi a časovém období, je vygenerován seznam produktů, na kterých
 se v tomto období pracovalo.
 Provede spojení tabulek uživatelů, smluv, výkazů, produktů, událostí a
 přihlášek daného zákazníka.
 Vyberou se pouze ty, které mají záznam v tabulce událostí v daném intervalu.
 Nakonec jsou k nalezeným záznamům přidány informace o jednotlivých datech
 a množství vykázaných jednotek.
 Podle nastavení způsobu účtování je vypočítána výsledná cena bez DPH.
\end_layout

\begin_layout Subsubsection
Produkty
\end_layout

\begin_layout Standard
Kromě běžných akcí pro filtrování, zobrazení, editování a smazání produktu
 administrátorem, jsou zde i metody pro export dat a tisk přehledů.
\end_layout

\begin_layout Description
admin_export() Vygeneruje CSV soubor s nalezenými produkty podle vyplněného
 filtru.
\end_layout

\begin_layout Description
admin_schedule() Pro každý produkt vyhovující podmínkám filtru vyhledá dny
 v týdnu, ve kterých probíhá výuka a přidá informaci o časovém intervalu.
\end_layout

\begin_layout Description
admin_schedulePdf() Použije výše uvedenou metodu k nalezení dat.
 Poté vygeneruje PDF soubor a nabídne jej uživateli ke stažení.
\end_layout

\begin_layout Subsubsection
Smlouvy
\end_layout

\begin_layout Standard
Řadič smluv definuje různý přístup k datům pro administrátora a dodavatele,
 kteří mohou nahlížet pouze na své smlouvy a nemohou je editovat (metody
 
\emph on
employees_index()
\emph default
, 
\emph on
employees_view($id)
\emph default
).
 
\end_layout

\begin_layout Description
admin_payment() Na základě filtru vybere odpovídající smlouvy a
\begin_inset space ~
\end_inset

vygeneruje přehled pro sestavení mezd a kontrolu přijatých faktur od dodavatelů.
 Základní schéma výpočtu pro rok 2008 bylo následující:
\begin_inset listings
lstparams "basicstyle={\ttfamily},breaklines=true,tabsize=2"
inline false
status open

\begin_layout Plain Layout

if typ_služby == služba then
\end_layout

\begin_layout Plain Layout

	if způsob_platby == hotově then
\end_layout

\begin_layout Plain Layout

		zaokrouhli mzdu na 50 haléřů
\end_layout

\begin_layout Plain Layout

	endif
\end_layout

\begin_layout Plain Layout

else if plátce daně then
\end_layout

\begin_layout Plain Layout

		if mzda > 5000 then
\end_layout

\begin_layout Plain Layout

			zálohová_daň := 15% ze mzdy
\end_layout

\begin_layout Plain Layout

		else
\end_layout

\begin_layout Plain Layout

			srážková_daň := 15% ze mzdy
\end_layout

\begin_layout Plain Layout

		endif
\end_layout

\begin_layout Plain Layout

endif
\end_layout

\end_inset

Slabinou systému je, že nedokáže generovat přehledy pro odvody na sociálním
 a zdravotním pojištění placených zaměstnavatelem.
\end_layout

\begin_layout Subsubsection
Příjmové doklady
\end_layout

\begin_layout Standard
Pro zobrazení dokladu a vygenerování položek k
\begin_inset space ~
\end_inset

zaplacení slouží metoda 
\emph on
admin_view($id)
\emph default
.
 Pro každý produkt se sečtou již zaplacené položky a
\begin_inset space ~
\end_inset

celkový počet položek k
\begin_inset space ~
\end_inset

zaplacení.
 Rozdíl těchto dvou mezivýsledků určuje nedoplatek popřípadě přeplatek na
 daném produktu.
 Jelikož je rozhraní pro přidávání a
\begin_inset space ~
\end_inset

mazání položek z
\begin_inset space ~
\end_inset

dokladu postaveno na AJAXu jsou vytvořeny dvě metody 
\emph on
admin_additem()
\emph default
 a 
\emph on
admin_delitem()
\emph default
, které po provedení akce vygenerují element s
\begin_inset space ~
\end_inset

aktualizovanými položkami dokladu.
\end_layout

\begin_layout Subsubsection
Události v kalendáři
\end_layout

\begin_layout Standard
Pro přehledné zobrazení událostí jsou na výběr dvě možnosti.
 Tou první je zobrazení všech událostí v daném měsíci v
\begin_inset space ~
\end_inset

tabulce podobné kalendáři.
 K tomuto účelu slouží metoda 
\emph on
PREFIX_calendar()
\emph default
, kterou jsou získány všechny záznamy vyhovující filtru a
\begin_inset space ~
\end_inset

pro generování pohledu je použit pomocník třídy 
\emph on
CalendarHelper::calendar()
\emph default
.
\end_layout

\begin_layout Standard
Druhou variantou je týdenní zobrazení včetně času.
 Data jsou nejdřív seřazena a
\begin_inset space ~
\end_inset

vícedenní záznamy se rozdělí do několika jednodenních (např.
 událost 8.7.2009 16:00 - 9.7.2009 14:00 je rozdělena na 8.7.2009 16:00-24:00
 a
\begin_inset space ~
\end_inset

9.7-2009 00:00-14:00).
 Rozdělené záznamy jsou pak vykresleny pomocí metody 
\emph on
CalendarHelper::week()
\emph default
.
\end_layout

\begin_layout Section
Zásuvné moduly (
\emph on
Plugins
\emph default
)
\end_layout

\begin_layout Standard
V této části budou popsány moduly jiných autorů a jejich úpravy a vylepšení,
 které byly použity při implementaci systému.
\end_layout

\begin_layout Subsection
Vyhledávací modul (
\emph on
Searchable
\emph default
)
\end_layout

\begin_layout Standard
Nejdůležitějším požadavkem na tento modul je rychlost.
 Jelikož byl vybrán databázový systém MySQL, který ve verzi 5.2 umožňuje
 fulltextové vyhledávání pouze nad tabulkami typu MyISAM, bylo potřeba zajistit,
 že půjde rychle vyhledávat i
\begin_inset space ~
\end_inset

data obsažená tabulkách typu InnoDB.
\end_layout

\begin_layout Standard
Idea spočívá ve vytvoření tabulky typu MyISAM, do které jsou uložena všechna
 data z textových sloupců indexované tabulky.
 Výhodou je, že lze prohledávat více tabulek jedním dotazem.
 Nalezené řádky jsou spojeny se záznamy v původní tabulce.
\end_layout

\begin_layout Standard
Úpravy se dočkalo generování výstupu pro 
\begin_inset Quotes pld
\end_inset

našeptávač
\begin_inset Quotes prd
\end_inset

 
\begin_inset CommandInset ref
LatexCommand eqref
reference "fig:Našeptávač"

\end_inset

, jinak vše zůstalo podle 
\begin_inset CommandInset citation
LatexCommand cite
key "searchable"

\end_inset

.
\end_layout

\begin_layout Subsection
Komprimace skriptů a kaskádových stylů (
\emph on
Asset
\emph default
)
\end_layout

\begin_layout Standard
Modul 
\emph on
Asset
\emph default
 
\begin_inset CommandInset citation
LatexCommand cite
key "asset"

\end_inset

 využívá projektů 
\emph on
JSMin
\emph default
 a
\emph on

\begin_inset space ~
\end_inset

CSSTidy
\emph default
 pro komprimaci JavaScriptu a
\begin_inset space ~
\end_inset

kaskádových stylů.
 Vybere všechny soubory, které byly do stránky vloženy voláním 
\emph on
JavascriptHelper::link()
\emph default
 a 
\emph on
HtmlHelper::css()
\emph default
, a ty pak transformuje do optimalizovaných souborů.
\end_layout

\begin_layout Subsection
Optimalizace generování dotazů (
\emph on
Url_cache
\emph default
)
\end_layout

\begin_layout Standard
Při optimalizaci výkonu bylo zjištěno, že na stránkách, kde je potřeba generovat
 větší množství odkazů, dochází k
\begin_inset space ~
\end_inset

výraznému zpomalení generování výstupu.
 Slabé místo bylo nalezeno v
\begin_inset space ~
\end_inset

metodě 
\emph on
Router::url()
\emph default
, která je volána pro vytvoření URL podle nastaveného směrování v 
\emph on
app/coufig/routes.php
\emph default
.
\end_layout

\begin_layout Standard
Tento modul zavádí ukládání vygenerovaných URL do vyrovnávací paměti a
\begin_inset space ~
\end_inset

odbourává nutnost neustálého volání výše zmíněné metody.
\end_layout

\begin_layout Chapter
Uživatelská dokumentace
\end_layout

\begin_layout Standard
Cílem kapitoly je stručně přiblížit výhody informačního systému a
\begin_inset space ~
\end_inset

jeho základním způsobem ovládání.
 V jednotlivých částech je vysvětleno, jak má správce postupovat od úvodní
 instalace, přes inicializaci databáze, uložení informací o uživatelích,
 přidání produktů až po tisk účetních podkladů.
 
\end_layout

\begin_layout Standard
Dodavatelům a zaměstnancům je názorně předvedeno, jak správně vyplnit měsíční
 výkazy a jak vést evidenci docházky účastníků kurzů.
 Zákazníkům je vysvětlen postup, kterým jednoduše zjistí, kolik z objednaných
 služeb již bylo zaplaceno, zkontrolují průběh aktuálních kurzů či počet
 přeložených stran překladu.
 Studenti si mohou zobrazit rozvrh hodin na další týdny a zkontrolovat zaznamena
nou docházku.
\end_layout

\begin_layout Section
Instalace serveru
\end_layout

\begin_layout Standard
Pro běh serverové aplikace je nutné mít program, který umožňuje zpracování
 zdrojových kódů a
\begin_inset space ~
\end_inset

prezentaci výstupu protokolem HTTP popřípadě HTTPS.
 Nejznámějším volně dostupným programem je Apache
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://httpd.apache.org"

\end_inset


\end_layout

\end_inset

, který umožňuje pomocí modulů přidat podporu pro jazyk PHP nutný k běhu
 IS.
 Následující postupy jsou pouze orientační a mohou se lišit podle operačního
 systému a jeho verze.
 Pokud je systém instalován na fungující server, je doporučeno vytvořit
 nejdříve zálohu a pak přejít rovnou na následující kapitolu.
\end_layout

\begin_layout Subsection
Stažení a instalace Apache
\end_layout

\begin_layout Standard
Pokud je systém instalován na některou z
\begin_inset space ~
\end_inset

moderních linuxových distribucí, je doporučeno nejdříve prohledat její repositář
e.
 Ve většině případů se zde nachází již hotový balík upravený pro snadnější
 instalaci a
\begin_inset space ~
\end_inset

konfiguraci.
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Plain Layout

# Debian a jeho derivace (Ubuntu, Kubuntu, ...):
\end_layout

\begin_layout Plain Layout

apt-get install apache2
\end_layout

\begin_layout Plain Layout

# Gentoo
\end_layout

\begin_layout Plain Layout

emerge apache2
\end_layout

\end_inset


\end_layout

\begin_layout Standard
V opačném případě je nutné stáhnout archív zdrojových kódů nebo předkompilovanou
 ze stránek projektu
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://httpd.apache.org/download.cgi"

\end_inset


\end_layout

\end_inset

 a postupovat podle 
\begin_inset CommandInset citation
LatexCommand cite
key "apache2"

\end_inset

.
\end_layout

\begin_layout Subsection
Konfigurace Apache
\end_layout

\begin_layout Standard
Pro správnou funkci aplikace je potřeba doinstalovat, popřípadě povolit
 následující moduly: 
\shape italic
mod_php5
\shape default
, 
\shape italic
mod_rewrite
\shape default
 a 
\shape italic
mod_ssl.

\shape default
 Pro správnou funkci zabezpečeného připojení je nutné vygenerovat certifikáty
 a upravit konfiguraci stránek.
\end_layout

\begin_layout Subsection
Stažení a instalace MySQL serveru
\begin_inset CommandInset label
LatexCommand label
name "sub:Stažení-a-instalace"

\end_inset


\end_layout

\begin_layout Standard
Při instalaci MySQL serveru se postupuje obdobně jako s instalací Apache.
 Nejprve ověřte zda se balík nenachází v repositářích.
 Pokud tomu tak není, je potřeba stáhnout instalační soubory z
\begin_inset space ~
\end_inset


\emph on

\begin_inset CommandInset href
LatexCommand href
target "http://dev.mysql.com/downloads/"

\end_inset


\emph default
 a
\begin_inset space ~
\end_inset

postupovat podle návodu uvedeného v
\begin_inset space ~
\end_inset

dokumentaci dostupné rovněž z
\begin_inset space ~
\end_inset

výše uvedeného odkazu.
\end_layout

\begin_layout Standard
Po nainstalováni serveru je potřeba vytvořit nového uživatele a
\begin_inset space ~
\end_inset

databázi pro potřeby informačního systému.
 Po připojení k databázi jako správce (obvykle se jménem 
\emph on
root
\emph default
 nebo 
\emph on
mysql
\emph default
 a
\begin_inset space ~
\end_inset

heslem zadaným při instalaci) můžete použít následující skript.
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\ttfamily}"
inline false
status open

\begin_layout Plain Layout

-- Vytvoření databáze.
\end_layout

\begin_layout Plain Layout

CREATE DATABASE isa_database;
\end_layout

\begin_layout Plain Layout

-- Vytvoření uživatele s heslem.
\end_layout

\begin_layout Plain Layout

CREATE USER 'isa_admin'@'localhost'
\end_layout

\begin_layout Plain Layout

IDENTIFIED BY 'isa_password';
\end_layout

\begin_layout Plain Layout

-- Přidání všech oprávnění k databázi.
\end_layout

\begin_layout Plain Layout

GRANT ALL PRIVILEGES
\end_layout

\begin_layout Plain Layout

ON isa_database.*  TO 'isa_admin'@'localhost' 
\end_layout

\begin_layout Plain Layout

WITH GRANT OPTION;
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Jméno databáze (
\emph on
isa_database
\emph default
), uživatele (
\emph on
isa_admin
\emph default
) i
\begin_inset space ~
\end_inset

heslo (
\emph on
isa_password
\emph default
) je doporučeno změnit podle vlastních zvyklostí.
\end_layout

\begin_layout Subsection
Umístění aplikace
\end_layout

\begin_layout Standard
Pokud je server správně nakonfigurovaný, zkopírujte složku s
\begin_inset space ~
\end_inset

aplikací do adresáře zvoleného v
\begin_inset space ~
\end_inset

konfiguraci Apache (obvykle 
\emph on
/var/www
\emph default
 nebo 
\emph on
C:
\backslash

\backslash
Program Files
\backslash
apache2
\backslash
www
\emph default
).
 Pro větší bezpečnost je doporučeno doplnit proměnnou 
\emph on
DocumentRoot
\emph default
 v
\begin_inset space ~
\end_inset

konfiguraci Apache o
\begin_inset space ~
\end_inset


\emph on
/app/webroot
\emph default
.
 Dále je potřeba nastavit přihlašovací údaje k databázi podle předchozí
 části v souboru 
\emph on
app/config/database.php
\emph default
.
 Dále je potřeba se ujistit, že složka 
\emph on
app/tmp/
\emph default
 má nastavena taková práva, aby do něj mohly PHP skripty zapisovat.
\end_layout

\begin_layout Subsection
Inicializace databáze
\end_layout

\begin_layout Standard
V souboru 
\emph on
app/config/sql/isa_init.sql
\emph default
 se nachází MySQL 5.2+ kompatibilní skript, který vytvoří tabulky a
\begin_inset space ~
\end_inset

naplní je daty nutnými k
\begin_inset space ~
\end_inset

prvnímu přihlášení administrátora.
 Import skriptu lze provést pomocí příkazové řádky následujícím příkazem
 z adresáře s uvedeným skriptem.
\begin_inset listings
lstparams "basicstyle={\small\ttfamily},breaklines=true"
inline false
status open

\begin_layout Plain Layout

shell> mysql --user=isa_admin --password=isa_password 
\backslash

\end_layout

\begin_layout Plain Layout

       isa_database < isa_init.sql
\end_layout

\end_inset


\end_layout

\begin_layout Section
Správce
\end_layout

\begin_layout Standard
Správce má standardně nastavena veškerá přístupová práva ke všem modulům
 systému.
 Jedná se o
\begin_inset space ~
\end_inset

roli manažera agentury rozhodujícím o
\begin_inset space ~
\end_inset

definici přístupových práv k
\begin_inset space ~
\end_inset

jednotlivým modulům.
 Může delegovat část oprávnění na další skupiny např.
 administrativních pracovníků nebo lektorů s přístupem ke tvorbě testů.
\end_layout

\begin_layout Subsection
Upřesňující informace
\end_layout

\begin_layout Standard
Pro další čtení manuálu je potřeba upřesnit několik důležitých pojmů potřebných
 pro správné pochopení.
\end_layout

\begin_layout Description
Systémová
\begin_inset space ~
\end_inset

skupina je nutná pro správné fungování IS.
\end_layout

\begin_layout Description
Správce: pověřený uživatel s plnými právy ke všem modulům systému.
\end_layout

\begin_layout Description
Dodavatelé: zaměstnanec, brigádník nebo podnik vykonávající zadanou práci.
\end_layout

\begin_layout Description
Odběratelé: zákazníci, kteří si objednali libovolný produkt.
\end_layout

\begin_layout Description
Poskytovatelé: podniky, které jsou vedeny 
\begin_inset Quotes pld
\end_inset

pod jednou střechou
\begin_inset Quotes prd
\end_inset

 a sdílí část informací.
\end_layout

\begin_layout Description
Účastníci: studenti jednotlivých kurzů.
 
\end_layout

\begin_layout Standard
Texty u odkazu na zobrazení, editaci nebo smazání záznamu mohou být nahrazeny
 po řadě obrázky: 
\begin_inset Graphics
	filename more.gif
	scale 80

\end_inset

,
\begin_inset Graphics
	filename edit.gif
	scale 80

\end_inset

 a 
\begin_inset Graphics
	filename delete.gif
	scale 80

\end_inset

.
\end_layout

\begin_layout Subsection
První přihlášení
\end_layout

\begin_layout Standard
Pro první přihlášení použijte přihlašovací jméno 
\emph on
admin
\emph default
 a heslo 
\emph on
isa2009
\emph default
.
 Následně je doporučeno změnit si heslo kliknutím na odkaz 
\emph on
Změnit heslo
\emph default
 nacházející se v pravém horním rohu.
\end_layout

\begin_layout Subsection
Uživatelé
\begin_inset CommandInset label
LatexCommand label
name "sub:Uživatelé-(Users)"

\end_inset


\end_layout

\begin_layout Standard
Modul 
\noun on
Uživatelé
\noun default
 nabízí veškeré nastavení potřebné pro definování možností při užívání systému
 osobami majícími vztah k
\begin_inset space ~
\end_inset

IS.
 Dále jsou zde uchovány veškeré osobní informace důvěrného charakteru souvisejíc
í s uživateli.
\end_layout

\begin_layout Description
Seznam
\begin_inset space ~
\end_inset

uživatelů: V horní části se nachází odkazy na akce související s
\begin_inset space ~
\end_inset

uživateli.
 Filtry pro práci se seznamem uživatelů jsou umístěny nad hlavní tabulkou
 a
\begin_inset space ~
\end_inset

dále v
\begin_inset space ~
\end_inset

hlavičce tabulky s
\begin_inset space ~
\end_inset

funkcí 
\begin_inset Quotes pld
\end_inset

našeptávače
\begin_inset Quotes prd
\end_inset

.
 
\end_layout

\begin_layout Description
Přidání
\begin_inset space ~
\end_inset

uživatele: Odkaz na formulář je hlavním menu a
\begin_inset space ~
\end_inset

v
\begin_inset space ~
\end_inset

částech, které na uživatelích závisí.
 Povinnou položkou je 
\emph on
zobrazované jméno
\emph default
, která slouží jako popisek ve všech filtrech.
 Ostatní položky je možné vyplnit až při jejich potřebě ve výpisu.
 Volba 
\emph on

\begin_inset Quotes pld
\end_inset

aktivní
\begin_inset Quotes prd
\end_inset


\emph default
 slouží k
\begin_inset space ~
\end_inset

aktivaci uživatelského účtu.
 Uživatel je schopen se přihlásit pouze pokud je jeho účet takto označen
 a
\begin_inset space ~
\end_inset

zadal správnou kombinaci uživatelského jména a
\begin_inset space ~
\end_inset

hesla.
\end_layout

\begin_layout Description
Editace
\begin_inset space ~
\end_inset

uživatele: Uživatele vyhledejte přes filtr seznamů uživatelů a
\begin_inset space ~
\end_inset

klikněte na odkaz 
\emph on
editovat
\emph default
.
 Jednotlivé údaje jsou rozděleny do skupin se souvisejícími údaji.
 Vyberte odpovídající skupinu k
\begin_inset space ~
\end_inset

editaci a
\begin_inset space ~
\end_inset

pro uložení změn použijte tlačítko 
\emph on
Uložit
\emph default
.
 V
\begin_inset space ~
\end_inset

případě chybového hlášení zkontrolujte všechny skupiny údajů.
\end_layout

\begin_layout Description
Nastavení
\begin_inset space ~
\end_inset

či
\begin_inset space ~
\end_inset

změna
\begin_inset space ~
\end_inset

hesla: V profilu uživatele klikněte na odkaz 
\emph on
změnit heslo
\emph default
 a
\begin_inset space ~
\end_inset

vyplňte nové heslo do obou kolonek.
 Správce může editovat hesla všem uživatelům.
 Měl by je o
\begin_inset space ~
\end_inset

této změně informovat.
 Případně může použít automatické generování hesla s odeslaním na uživatelův
 email.
\end_layout

\begin_layout Subsubsection
Skupiny a oprávnění
\end_layout

\begin_layout Standard
V podmodulu 
\noun on
Skupiny a oprávnění
\noun default
 můžete přidávat a
\begin_inset space ~
\end_inset

mazat uživatelské skupiny a jejich oprávnění.
 Pro zachování správného fungování systému nemažte tyto systémové skupiny:
 
\emph on
customers
\emph default
, 
\emph on
employees
\emph default
, 
\emph on
providers
\emph default
, 
\emph on
students
\emph default
 a 
\emph on
admin
\emph default
.
\end_layout

\begin_layout Standard
Při implicitním nastavení má každá ze systémových skupin definované a přiřazené
 oprávnění k prefixovaným akcím jednotlivých modulů.
 Tato oprávnění jsou definována následujícím způsobem: 
\emph on
*:customers_*, *:employees_*, *:providers_*, *:students_*, *:admin_*
\emph default
 a
\begin_inset space ~
\end_inset

umožňují dané skupině v
\begin_inset space ~
\end_inset

libovolném modulu spouštět akce začínající jménem skupiny.
 V
\begin_inset space ~
\end_inset

příkladu byl použit expanzní znak 
\begin_inset Quotes pld
\end_inset

*
\begin_inset Quotes prd
\end_inset

, který je možné používat k
\begin_inset space ~
\end_inset

nahrazení libovolného počtu libovolných znaků a
\begin_inset space ~
\end_inset


\begin_inset Quotes pld
\end_inset

:
\begin_inset Quotes prd
\end_inset


\begin_inset space ~
\end_inset

určuje hranici mezi modulem a
\begin_inset space ~
\end_inset

akcí (např.
 oprávnění 
\emph on
Users:*_view
\emph default
 umožní zobrazit všechny prefixované akce 
\emph on
view
\emph default
 v modulu 
\noun on
Uživatelé
\noun default
).
\end_layout

\begin_layout Standard
Každá skupina může může mít přiřazeno více definovaných oprávnění a je na
 správci, jak s nimi bude zacházet.
\end_layout

\begin_layout Subsection
Produkty
\end_layout

\begin_layout Standard
Modul 
\noun on
Produkty
\noun default
 je závislý na správně rozdělených uživatelích do systémových skupin.
 Rovněž je doporučeno předvyplnit číselník kategorií produktů a
\begin_inset space ~
\end_inset

účtovacích jednotek.
\end_layout

\begin_layout Subsubsection
Vytvoření nového produktu
\end_layout

\begin_layout Standard
Vyberte kategorii a poskytovatele.
 Dále vyplňte název produktu a
\begin_inset space ~
\end_inset

informaci o
\begin_inset space ~
\end_inset

datu zahájení a předpokládaném či žádaném datu ukončení prací.
 Výsledná cena pro zákazníka se bude odvíjet od dalšího nastavení ve formuláři.
\end_layout

\begin_layout Standard
Stanovte si, jak budete daný produkt nabízet a
\begin_inset space ~
\end_inset

od čeho se odvíjí náklady.
 V
\begin_inset space ~
\end_inset

případě, že se náklady odvíjí od počtu zúčastněných osob, zaškrtněte možnost
 
\emph on
Počítat účastníky
\emph default
.
 Pokud nevíte dopředu, kolik hodin bude odučeno nebo kolik normostran bude
 účtováno a
\begin_inset space ~
\end_inset

náklady na ně nejsou fixní, zaškrtněte možnost 
\emph on
Počítat množství
\emph default
.
 Celková cena bude spočítána takto:
\end_layout

\begin_layout Itemize
Jednotková cena je vynásobena počtem účastníků, byla-li odpovídající volba
 zaškrtnuta.
\end_layout

\begin_layout Itemize
Mezisoučet je vynásoben součtem odpracovaných jednotek v
\begin_inset space ~
\end_inset

událostech ve výkazech přiřazených k
\begin_inset space ~
\end_inset

produktu, pokud byla volba 
\emph on
počítat množství
\emph default
 zaškrtnuta.
\end_layout

\begin_layout Standard
Teď už zbývá doplnit zbývající povinné položky a
\begin_inset space ~
\end_inset

to jednotku a
\begin_inset space ~
\end_inset

jednotkovou cenu.
\end_layout

\begin_layout Subsubsection
Filtrování produktů
\end_layout

\begin_layout Standard
Pro filtrování produktů můžete použít 
\begin_inset Quotes pld
\end_inset

našeptávač
\begin_inset Quotes prd
\end_inset

 u jednotlivých polí.
 Vyplněním části hledaného výrazu, se zobrazí seznam položek, které tento
 výraz obsahují (viz.
 obrázek
\begin_inset CommandInset ref
LatexCommand vref
reference "fig:Našeptávač"

\end_inset

).
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Graphics
	filename autocomplete.png
	rotateOrigin center

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Našeptávač"

\end_inset


\begin_inset Quotes pld
\end_inset

Našeptávač
\begin_inset Quotes prd
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Odstranění produktu
\end_layout

\begin_layout Standard
Odstranění produktu není povoleno, pokud obsahuje výkazy nebo přihlášky.
 Nejprve je nutné zkontrolovat, že jednotlivé položky na výkazech nebyly
 zaúčtovány a ty pak následně vymazat.
 Další problém může nastat, pokud již byl vydán příjmový doklad.
 V tom případě z něj musíte stornovat příslušné položky vztahující se k
 danému produktu.
 Při splnění všech těchto podmínek bude smazání umožněno.
\end_layout

\begin_layout Subsection
Smlouvy
\end_layout

\begin_layout Standard
Modul 
\noun on
Smlouvy
\noun default
 slouží k evidenci dodavatelů a
\begin_inset space ~
\end_inset

výpočtu mezd.
 V
\begin_inset space ~
\end_inset

přehledu smluv se zobrazují upozornění na překročený limit odpracovaných
 jednotek na smlouvu.
 Je možné rovněž filtrovat smlouvy podle uživatele, poskytovatele, typu
 smlouvy, typu platby a
\begin_inset space ~
\end_inset

stavu limitu.
\end_layout

\begin_layout Subsubsection
Vytvoření nové smlouvy
\end_layout

\begin_layout Standard
Při vytváření smluv vyplňte následující údaje, aby bylo možné správně generovat
 podklady pro mzdy.
\end_layout

\begin_layout Itemize

\emph on
Typ
\begin_inset space ~
\end_inset

smlouvy
\emph default
 určuje způsob výpočtu mezd.
 Typ 
\emph on
služba
\emph default
 určuje smlouvy, které její účastník fakturuje agentuře.
 U ostatních typů se generují zálohové a srážkové daně, pokud je u smlouvy
 zaškrtnuto, že je uživatel plátcem daně.
\end_layout

\begin_layout Itemize

\emph on
Způsob platby
\emph default
 nastavený na hotově způsobí zaokrouhlování na 50 haléřů.
\end_layout

\begin_layout Itemize

\emph on
Uživatel
\emph default
 a 
\emph on
poskytovatel
\emph default
 určují smluvní strany.
\end_layout

\begin_layout Itemize

\emph on
Maximání počet jednotek
\emph default
 nastavený na kladné číslo upozorní ve výpisu na smlouvy s
\begin_inset space ~
\end_inset

překročeným limitem odpracovaných jednotek.
\end_layout

\begin_layout Subsection
Výkazy
\end_layout

\begin_layout Standard
V modulu 
\noun on
Výkazy
\noun default
 se evidují dodavatelé produktů a jimi vykázané jednotky.
\end_layout

\begin_layout Subsubsection
Vyhledání a filtrování výkazů
\end_layout

\begin_layout Standard
V menu nebo produktech klikněte na 
\emph on
Zobrazit výkazy
\emph default
.
 V horní tabulce je možné zaškrtnou kategorie produktů, ke kterým byly výkazy
 přidány.
 Výkazy je rovněž možné filtrovat podle jednotlivých produktů, poskytovatelů,
 dodavatelů nebo aktuálního stavu.
 Pokud chcete zobrazit pouze výkazy za určité období vyplňte ve filtru datum
 začátku a konce.
\end_layout

\begin_layout Subsubsection
Vytvoření
\begin_inset space ~
\end_inset

a
\begin_inset space ~
\end_inset

přiřazení
\begin_inset space ~
\end_inset

výkazu
\begin_inset space ~
\end_inset

k
\begin_inset space ~
\end_inset

produktu 
\end_layout

\begin_layout Standard
Vytvoření a přiřazení výkazu k
\begin_inset space ~
\end_inset

produktu provádějte pouze pokud je produkt, ke kterému chcete přidat výkaz,
 již vytvořen.
 
\end_layout

\begin_layout Standard
V menu klikněte na položku 
\emph on
Přidat výkaz
\emph default
 a vyplňte následný formulář.
 U
\begin_inset space ~
\end_inset

dodavatele se rozlišuje se i typ smlouvy uvedený v závorce.
 Sazba a jednotka jsou rovněž povinné položky.
\end_layout

\begin_layout Standard
Další možností, jak přiřadit nový výkaz, je přes modul 
\noun on
Produkty
\noun default
, kde lze snadno vyhledat daný produkt.
 Zobrazte si detaily nalezeného produktu a
\begin_inset space ~
\end_inset

ve skupině 
\emph on
Přiřazené výkazy
\emph default
 klikněte na odkaz 
\emph on
Přidat výkaz
\emph default
.
\end_layout

\begin_layout Subsubsection
Přidání událostí k výkazu
\end_layout

\begin_layout Standard
Vyhledejte, zobrazte požadovaný výkaz a klikněte na 
\emph on
Hromadně přidat události
\emph default
.
 Vyplňte povinné položky měsíc a rok.
 Pokud je známé místo a čas je možné ho rovněž nastavit.
\end_layout

\begin_layout Subsection
Číselníky
\end_layout

\begin_layout Standard
V této části jsou stručně popsány použité číselníky, jejich funkce v
\begin_inset space ~
\end_inset

systému a
\begin_inset space ~
\end_inset

možnosti editace.
 Všechny obsahují automaticky generovaný číselný identifikátor (dále jen
 
\emph on
id
\emph default
), který slouží pro interní potřeby systému a není možné ho změnit.
 Dále je potřeba upozornit na fakt, že vytvořené položky v číselníku, které
 již byly v
\begin_inset space ~
\end_inset

systému přiřazeny nějakým záznamům, nelze vymazat.
 Vymazání je umožněno až když je číselník u
\begin_inset space ~
\end_inset

daných záznamů změněn nebo je celý uvedený záznam odstraněn.
\end_layout

\begin_layout Description
Kategorie
\begin_inset CommandInset label
LatexCommand label
name "kategorie"

\end_inset

 obsahuje název, zkratku, jednoduchý slovní popis a zaškrtávací políčko
 určující, zda se produkty v této kategorii považují za veřejné a má se
 zobrazovat jejich rozvrh na webových stránkách.
 Účel číselníku spočívá v rozčlenění množství produktů do skupin, podle
 kterých lze vytvářet tiskové sestavy, tj.
 přílohy faktur, rozvrhy, měsíční přehledy nákladů.
\end_layout

\begin_layout Description
Místa
\begin_inset CommandInset label
LatexCommand label
name "místa"

\end_inset

 obsahují název a adresu.
 Slouží k odkazu na místo v událostech.
\end_layout

\begin_layout Description
Jednotky 
\end_layout

\begin_layout Description
Jazyky slouží pro nastavení slovníků použitých při testování slovní zásoby.
\end_layout

\begin_layout Description
Štítky
\begin_inset CommandInset label
LatexCommand label
name "stítky"

\end_inset

 obsahují název a odkaz na nadřazený štítek, pro možnost tvorby hierarchické
 struktury článků.
\end_layout

\begin_layout Subsection
Tipy na urychlení práce
\end_layout

\begin_layout Standard
Zvláštní formulář na přidání produktu spolu se zákazníkem i dodavatelem
 umožní rychlejší zadávání většího množství nových produktů.
 Je standardně dostupný přes hlavní menu nebo na adrese 
\emph on
/admin/products/addall
\emph default
.
\end_layout

\begin_layout Section
Dodavatel
\end_layout

\begin_layout Standard
Dodavatel má přístup ke svým výkazům, smlouvám a dokumentům ke stažení přes
 položku v menu.
\end_layout

\begin_layout Subsection
Výkazy
\end_layout

\begin_layout Standard
Pro zobrazení seznamu výkazu klikněte v menu na 
\emph on
Moje výkazy
\emph default
.
 Nalezená data lze filtrovat podle kategorie přiřazeného produktu, jeho
 stavu, poskytovatele a typu smlouvy.
 Systém rovněž počítá součty odpracovaných jednotek podle zadaného období.
 Kliknutím na daný výkaz zobrazíte jeho detaily, kde se nachází kalendář
 vykázaných jednotek a seznam studentů.
\end_layout

\begin_layout Description
Přidání
\begin_inset space ~
\end_inset

odpracovaných
\begin_inset space ~
\end_inset

jednotek provedete kliknutím na odkaz Hromadně přidat událost.
 Poté se zobrazí formulář, kde vyplňte místo, měsíc, rok a čas výuky.
 V tabulce se dny v měsíci doplňte počty odpracovaných jednotek v jednotlivých
 dnech.
\end_layout

\begin_layout Description
Evidence
\begin_inset space ~
\end_inset

docházky studenta, který byl přítomen ve výuce, se provede kliknutím na
 
\begin_inset Quotes pld
\end_inset

-
\begin_inset Quotes prd
\end_inset

 v řádku s datem výuky a ve sloupci se jménem studenta.
 Znak 
\begin_inset Quotes pld
\end_inset

X
\begin_inset Quotes prd
\end_inset

 značí přítomnost studenta ve výuce a zároveň je možné účast zrušit obdobným
 způsobem.
\end_layout

\begin_layout Section
Zákazníci
\end_layout

\begin_layout Standard
Kliknutím v menu na 
\emph on
Moje přihlášky
\emph default
, zobrazíte seznam všech přiřazených produktů.
 Jednotlivé produkty můžete filtrovat podle jména, kategorie, poskytovatele
 a aktuálního stavu.
 Po vybrání produktu se zobrazí přehled lektorů a studentů přiřazených k
 přihlášce.
\end_layout

\begin_layout Chapter
Existující implementace
\end_layout

\begin_layout Standard
Existující implementace systémů podobného zaměření jako vytvořený systém
 lze rozdělit na několik skupin.
 Žádná však nepokrývá veškeré požadavky v plném rozsahu vzhledem ke specifickým
 způsobům vedení evidence a
\begin_inset space ~
\end_inset

účtování služeb.
 Byla proto zvolena varianta informačního systému 
\begin_inset Quotes pld
\end_inset

na míru
\begin_inset Quotes prd
\end_inset

 s
\begin_inset space ~
\end_inset

možností budoucího napojení na některý z
\begin_inset space ~
\end_inset

existujících systému pro správu webového obsahu a
\begin_inset space ~
\end_inset

podporu on-line vzdělávání.
 Cílem kapitoly je stručný popis nejpoužívanějších systémů vhodných pro
 budoucí propojení s
\begin_inset space ~
\end_inset

IS.
\end_layout

\begin_layout Section
Správci obsahu (
\emph on
CMS
\emph default
)
\end_layout

\begin_layout Standard
Skupina systémů pro správu obsahu je označována anglickou zkratkou CMS
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Content Management System
\emph default
 - systém pro správu obsahu
\end_layout

\end_inset

 a lze ji rozdělit do podskupin podle způsobu, jakým prezentují uložená
 data.
\end_layout

\begin_layout Description
Offline
\begin_inset space ~
\end_inset

zpracování Server vygeneruje statické HTML před samotnou publikací.
 Proto takové systémy nepotřebují, aby server aplikoval šablony na data
 při každém požadavku.
 Výhody jsou zjevné pro vytížené CMS používané převážně pro čtení dat.
 Naopak při častých změnách dat mohou být tyto systémy pomalé nebo neaktuální,
 proto je nutné si jejich nasazení řádně rozmyslet.
 Příkladem takového systému je například Vignette CMS.
\end_layout

\begin_layout Description
Online
\begin_inset space ~
\end_inset

zpracování Server generuje prezentační data až na základě požadavků klienta.
 To znamená, že server má daleko více práce.
 Proto je vhodné, aby vygenerovaná data uložil do vyrovnávací paměti a při
 dalším stejném dotazu vrátil požadovaná data přímo z ní.
 Mezi nejznámější open source systémy patří Joomla, Drupal, WordPress, TangoCMS,
 DotNetNuke a Zope.
 Pokročilé systémy umožňují také úpravy základních šablon, bez zásahu do
 zdrojových kódu.
\end_layout

\begin_layout Description
Hybridní Jak již název napovídá, tyto systémy kombinují oba předchozí přístupy.
 Příkladem takového systému je Blosxom, který se dočkal mnoha implementací
 v různých programovacích jazycích.
\end_layout

\begin_layout Standard
Systému pro správu obsahu existuje celá řada.
 Zde si stručně představíme nejznámější trojici open source správců webového
 obsahu napsaných v
\begin_inset space ~
\end_inset

PHP.
 Celkově se systémy moc neodlišují a
\begin_inset space ~
\end_inset

všechny mají silnou komunitu uživatelů, kteří se starají o vývoj a
\begin_inset space ~
\end_inset

rozšíření.
\end_layout

\begin_layout Subsection
Joomla!
\end_layout

\begin_layout Standard
Systém Joomla! je vyvíjen od roku 2005 a
\begin_inset space ~
\end_inset

vznikl odštěpením části vývojářů od projektu Mamboo.
 Joomla ve
\begin_inset space ~
\end_inset

verzi 1.5 a
\begin_inset space ~
\end_inset

vyšší nabízí kompletní lokalizaci, různá témata, blogy, fóra, hlasování,
 kalendář, indexaci stránek, RSS kanály a
\begin_inset space ~
\end_inset

podporu pro LDAP.
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename joomla.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
Joomla! - administrátorské rozhraní
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Pro Joomlu je napsáno přes 3000 open source doplňků a existují i
\begin_inset space ~
\end_inset

komerční doplňky například pro e-learning
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
\begin_inset CommandInset href
LatexCommand href
target "http://www.joomlalms.com/"

\end_inset


\end_layout

\end_inset

.
 Snadno lze vytvořit také internetové obchody, rezervační systémy a
\begin_inset space ~
\end_inset

další vlastní aplikace díky snadno rozšířitelné 
\emph on
MVC
\emph default
 architektuře.
 Nevýhodou může být málo strukturované rozdělení práv uživatelů k jednotlivým
 článkům a obsahu, což se ale má s
\begin_inset space ~
\end_inset

verzí 1.7 změnit.
 Velikost základní instalace dosahuje 13,8
\begin_inset space ~
\end_inset

MB.
 Budoucí napojení by mohlo z výhodou používat výše zmíněnou kompatibilní
 architekturu 
\emph on
MVC
\emph default
.
\end_layout

\begin_layout Subsection
Drupal
\end_layout

\begin_layout Standard
Drupal se stal open source projektem v roce 2001.
 Nabízí propracované rozhraní pro správu uživatelů, statistiku přístupů,
 blogy, fóra a další moduly včetně překladů do mnoha jazyků.
 V systému je dbáno hlavně na
\begin_inset space ~
\end_inset

bezpečnost.
 Proto mohou být administrátoři automaticky upozorněni na
\begin_inset space ~
\end_inset

aktualizace jak jádra aplikace, tak přídavných modulů.
 Navíc lze přístup do systému jednoduše omezit podle IP adresy.
\end_layout

\begin_layout Standard
Nejzajímavějším rozšířením s
\begin_inset space ~
\end_inset

ohledem na cíl této práce je DrupalEd.
 Umožňuje tvorbu a
\begin_inset space ~
\end_inset

správu výukových materiálů, rozdělení uživatelů do
\begin_inset space ~
\end_inset

skupin (tříd) s
\begin_inset space ~
\end_inset

možností nastavení přístupových práv k
\begin_inset space ~
\end_inset

jednotlivých stránkám.
 
\end_layout

\begin_layout Standard
Občas je Drupalu vyčítáno, že je oproti Joomle, v
\begin_inset space ~
\end_inset

některých nasazeních pomalejší.
 Přesto se jedná o
\begin_inset space ~
\end_inset

velmi dobrý produkt vhodný i
\begin_inset space ~
\end_inset

pro větší projekty, který s
\begin_inset space ~
\end_inset

přicházející verzí 7 tyto nedostatky postupně odstraňuje.
\end_layout

\begin_layout Standard
Z pohledu vývojáře může být překážkou trochu zastaralý neobjektový přístup.
 Kladně je naopak přijímána velikost základní instalace, která se pohybuje
 kolem 4,8
\begin_inset space ~
\end_inset

MB.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename drupal.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
Drupal - nastavení rolí v systému
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Wordpress
\end_layout

\begin_layout Standard
Wordpress je propracovaným publikačním nástrojem, jehož rozhraní je velice
 intuitivní a
\begin_inset space ~
\end_inset

přehledné.
 Funkcionalitu lze rozšířit pomocí zásuvných modulů a
\begin_inset space ~
\end_inset

na
\begin_inset space ~
\end_inset

postranní panel lze přidávat widgety
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
prvek na stránce zobrazující doplňkové informace
\end_layout

\end_inset

, které lze v
\begin_inset space ~
\end_inset

administrátorském prostředí nastavit 
\emph on
drag-and-drop
\emph default

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
způsob práce s elementy, které lze přesouvat mezi jednotlivými aplikacemi
 či jejich částmi
\end_layout

\end_inset

 akcemi.
\end_layout

\begin_layout Standard
Na velice dobré úrovni je podpora třídění článků pomocí kategorií a
\begin_inset space ~
\end_inset

štítků, kde je také umožněno vytvoření trvalého odkazu na článek pro případ
 změny zařazení do kategorií.
 K článkům lze přidávat fotogalerie, odkazy i
\begin_inset space ~
\end_inset

videa.
 S verzí 2.7 rovněž přibyla možnost stahovaní aktualizací a
\begin_inset space ~
\end_inset

modulů přes administrátorské rozhraní.
\end_layout

\begin_layout Standard
Tento nástroj se zatím jeví jako vhodná alternativa k
\begin_inset space ~
\end_inset

předešlým dvěma komplexním správcům, pro jednoduché publikování s
\begin_inset space ~
\end_inset

minimálními nároky na
\begin_inset space ~
\end_inset

studium administrátorského prostředí.
 Také velikost projektu odpovídá jeho schopnostem, když po rozbalení archívu
 má instalace velikost 6,9
\begin_inset space ~
\end_inset

MB.
 Je ovšem nutné podotknout, že samotné JavaScriptové knihovny zabírají třetinu
 místa.
 
\begin_inset Float figure
placement h
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename wordpress.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
Wordpress - správa widgetů
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
E-Learning
\end_layout

\begin_layout Standard
Samotnou kategorii představují specializované open source systémy pro e-learning
, evidenci kurzů a
\begin_inset space ~
\end_inset

jejich prodej.
 Při popisu těchto systémů je možné se setkat s
\begin_inset space ~
\end_inset

následujícími výrazy:
\end_layout

\begin_layout Itemize

\emph on
Course
\begin_inset space ~
\end_inset

Management
\begin_inset space ~
\end_inset

System
\begin_inset space ~
\end_inset

(CMS
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Zkratka je v tomto případě shodná se systémy pro správu obsahu, která bude
 dále v
\begin_inset space ~
\end_inset

textu upřednostňována.
\end_layout

\end_inset

)
\emph default
 - systém pro správu kurzů
\end_layout

\begin_layout Itemize

\emph on
Learning Management System (LMS)
\emph default
 - systém pro řízení výuky
\end_layout

\begin_layout Itemize

\emph on
Virtual Learning Environment (VLE)
\emph default
 - virtuální výukové prostředí
\end_layout

\begin_layout Standard
V posledních letech zažívají tyto systémy bouřlivý vývoj.
 Vznikají buď jako naprosto nové systémy, nebo jako rozšíření do stávajících
 CMS.
 
\end_layout

\begin_layout Standard
Důležitým faktorem pro práci s e-learningovými systémy je dodržování standardů
 tak, aby bylo možné rychle a snadno začlenit již existující výukový materiál,
 který mohl vzniknout již před samotným nasazením systému.
 Mezi tyto standardy patří SCORM
\begin_inset Foot
status collapsed

\begin_layout Plain Layout

\emph on
Shareable Content Object Reference Model 
\emph default
- referenční model sdílitelných obsahových objektů
\end_layout

\end_inset

.
 Jedná se o
\begin_inset space ~
\end_inset

soubor specifikací, jenž by měl daný systém podporovat, aby v
\begin_inset space ~
\end_inset

něm bylo možné provozovat libovolný kompatibilní výukový obsah.
\end_layout

\begin_layout Subsection
Moodle
\end_layout

\begin_layout Standard
Open source implementace e-learningových systému jsou již dnes hojně využívány.
 Příkladem je 
\emph on
Moodle
\emph default
, který je rozšířen v
\begin_inset space ~
\end_inset

mnoha zemích včetně České republiky a
\begin_inset space ~
\end_inset

je využíván i
\begin_inset space ~
\end_inset

na několika zdejších univerzitách.
 Mezi ty největší patří UK, ČVUT a ČZU.
 
\end_layout

\begin_layout Standard
Podle 
\begin_inset CommandInset citation
LatexCommand cite
key "Moodle.cz"

\end_inset

 umožňuje či podporuje snadnou publikaci studijních materiálů, zakládání
 diskusních fór, sběr a
\begin_inset space ~
\end_inset

hodnocení elektronicky odevzdávaných úkolů, tvorbu online testů a
\begin_inset space ~
\end_inset

řadu dalších činností sloužících pro podporu výuky.
 Podporuje i
\begin_inset space ~
\end_inset

napojení na jiné služby jako je LDAP nebo IMAP.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename moodle.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
Moodle - rozhraní pro učitele
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
ATutor
\end_layout

\begin_layout Standard
ATutor je navržen s maximálním ohledem na přístupnost dle standardu W3C
 WCAG 1.0.
 Při správě výukového obsahu se můžete spolehnou na kompatibilitu s SCORM
 1.2, pokročilou správu práv uživatelů a
\begin_inset space ~
\end_inset

kurzů.
 
\end_layout

\begin_layout Standard
Lze v
\begin_inset space ~
\end_inset

něm vytvářet blogy, fóra, testy a
\begin_inset space ~
\end_inset

vést evidenci o
\begin_inset space ~
\end_inset

studijních výsledcích.
 Systém je snadno přizpůsobitelný pomocí témat a výhodou je možnost instalovat
 aktualizace a
\begin_inset space ~
\end_inset

opravy přímo z
\begin_inset space ~
\end_inset

webového prohlížeče.
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename atutor-patcher.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
ATutor - instalátor aktualizací a oprav
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
eFront
\end_layout

\begin_layout Standard
EFront je vysoce propracovaný systém postavený na technologii AJAX s
\begin_inset space ~
\end_inset

atraktivním designem.
 Samozřejmostí už je podpora SCORM a vícejazykového uživatelského rozhraní.
 Pro větší firmy může být přínosem spolupráce s LDAP.
 Navíc má již v základní instalaci integrován platební nástroj PayPal.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename efront.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
eFront - úvodní administrátorská obrazovka
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Claroline
\end_layout

\begin_layout Standard
Claroline má jednoduché a přehledné rozhraní.
 Studenti mohou využívat chat, diskuzní fóra a wiki.
 Učitelé mají možnost vytvářet úkoly nebo cvičení a zobrazit si jejich statistik
y.
 Při vytváření obsahu je možné se přepnout do jiné role a zkontrolovat,
 jak se data zobrazují dané skupině uživatelů.
\end_layout

\begin_layout Standard
Dále systém umožňuje import kurzů ve formátu SCORM 1.2 a nastavení přístupu
 k
\begin_inset space ~
\end_inset

jednotlivým stránkách podle příslušnosti ke skupinám.
 Administrátor si může zobrazit statistiky aktivit jednotlivých uživatelů
 a jednoduše spravovat jimi vytvořena data.
 
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename claroline.png
	lyxscale 50
	width 100text%

\end_inset


\begin_inset Caption

\begin_layout Plain Layout
Claroline - rozhraní pro vedoucího kurzu
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Možnosti integrace systémů
\end_layout

\begin_layout Standard
Při integraci libovolného CMS a LMS bude potřeba řešit sdílení uživatelských
 účtů.
 Vhodným řešením je využití LDAP, které bylo pro tyto účely navrženo.
 Použité technologie a
\begin_inset space ~
\end_inset

framework CakePHP jsou k
\begin_inset space ~
\end_inset

takovému způsobu napojení přizpůsobeny.
 Pro CakePHP již existuje hotový modul 
\begin_inset CommandInset citation
LatexCommand cite
key "LDAP"

\end_inset

 pro komunikaci s LDAP serverem.
\end_layout

\begin_layout Standard
Samotná integrace by měla být provedena pomocí modelů definujících zdroje
 dat v jednotlivých systémech.
 Jedním z možných problémů je předávání informací o
\begin_inset space ~
\end_inset

právech přístupu k modulům v různých systémech.
 Například zajištění uživatelského přístupu k výukovým materiálům uložených
 v LMS studenům zapsaným do produktu v IS.
 Všechny záznamy používané napříč databázemi budou muset mít jednoznačné
 identifikátory, tzv.
 UUID.
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Chapter
Závěr
\end_layout

\begin_layout Standard
Implementovaný systém se po několika měsících ostrého provozu v
\begin_inset space ~
\end_inset

jazykové agentuře ukázal jako provozuschopný a
\begin_inset space ~
\end_inset

splňuje všechny stanovené cíle.
 Mnohonásobně zkrátil dobu potřebnou k evidenci kurzů, zákazníků, studentů,
 přípravě mezd a
\begin_inset space ~
\end_inset

kontrole faktur.
 Došlo ke zefektivnění a zrychlení práce při vyřizování zakázek.
 Byly odstraněny duplicitní činnosti a
\begin_inset space ~
\end_inset

v
\begin_inset space ~
\end_inset

neposlední řadě přispěl k
\begin_inset space ~
\end_inset

tlaku na dodavatele, aby ve vlastním zájmu svou činnost vykazovali včas,
 přesně a
\begin_inset space ~
\end_inset

podle daných pravidel.
 Navržený obsah všech modulů se osvědčil a
\begin_inset space ~
\end_inset

umožnil jednoduše zpřístupňovat části IS různým skupinám uživatelů.
 Optimalizace procesů a minimalizace chyb přinesly zvýšenou důvěru zákazníků
 v agenturu.
 Významný je rovněž přínos IS ke
\begin_inset space ~
\end_inset

správnosti a
\begin_inset space ~
\end_inset

přehlednosti dat pro účetní evidenci nákladů a
\begin_inset space ~
\end_inset

výnosů dle typů produktů.
 
\end_layout

\begin_layout Standard
Zavedení informačního systému do praxe ale poukázalo i
\begin_inset space ~
\end_inset

na
\begin_inset space ~
\end_inset

některé nedostatky v
\begin_inset space ~
\end_inset

jeho implementaci a
\begin_inset space ~
\end_inset

použitých nástrojích.
 Jde především o
\begin_inset space ~
\end_inset

málo strukturované přístupové práva k
\begin_inset space ~
\end_inset

záznamům v
\begin_inset space ~
\end_inset

tabulkách, jejichž rozdělení je přímo začleněné v
\begin_inset space ~
\end_inset

kódu, a
\begin_inset space ~
\end_inset

spolupráci s
\begin_inset space ~
\end_inset

externími aplikacemi.
 V
\begin_inset space ~
\end_inset

případě databázového systému MySQL se jedná o
\begin_inset space ~
\end_inset

horší podporu fulltextového vyhledávání a
\begin_inset space ~
\end_inset

práci s
\begin_inset space ~
\end_inset

aplikačními výjimkami.
\end_layout

\begin_layout Standard
Ukázalo se, že existují kvalitní open source nástroje usnadňující a urychlující
 návrh i samotnou implementaci podnikových informačních systémů.
 Další rozvoj systému by měl směřovat k
\begin_inset space ~
\end_inset

integraci některého ze správců webového obsahu a
\begin_inset space ~
\end_inset

nástroje pro podporu výuky, popsaných v
\begin_inset space ~
\end_inset

předcházející kapitole.
 Mohla by být přidána podpora on-line komunikace a přihlašování pomocí jednotné
 sdílené univerzální identity (např.
 Open
\begin_inset space ~
\end_inset

ID).
 V
\begin_inset space ~
\end_inset

oblasti bezpečnosti je potřeba se zaměřit na možnost definování přístupu
 uživatelů k
\begin_inset space ~
\end_inset

datům na úrovni tabulek, řádků nebo jednotlivých položek.
 Nejlepší možnou variantou by bylo řízení přístupu na úrovni databáze.
 Oproti provádění stejného úkonu na aplikační úrovni odpadá nutnost opakované
 implementace pro jinou aplikaci, která by mohla přistupovat k uloženým
 datům.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Sklar-2003"

\end_inset

Sklar D., Trachtenberg A.: 
\emph on
PHP Cookbook
\emph default
, O'Reilly, 2003, ISBN: 156592681
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Hugh-2004"

\end_inset

Hugh E.
 W, Lane D.: 
\emph on
Web Database Applications with PHP and MySQL
\emph default
, 2nd.
 ed., O'Reilly, 2004, ISBN: 0596000413 
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Welling-2005"

\end_inset

Welling L., Thomson L.: 
\emph on
MySQL: Průvodce základy databázového systému
\emph default
, Computer Press, Praha, 2005, ISBN: 8025106713
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "informační systémy"

\end_inset

 
\emph on
Čo predchádza výberu informačného systému?
\emph default

\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://www.informacny-system.sk"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "wikipedia"

\end_inset

Wikipedia: 
\emph on
Informační systém
\emph default
, 2009
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://cs.wikipedia.org/wiki/Informační_systém"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "soukupova 2004"

\end_inset

Dana Soukupová: 
\emph on
Algoritmy logického návrhu relační databáze
\emph default
, 2004 
\begin_inset Newline newline
\end_inset

bakalářská práce MFF UK
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "wysiwyg"

\end_inset

Wikipedia: WYSIWYG, Červenec 2009
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://cs.wikipedia.org/wiki/WYSIWYG"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "root-testy"

\end_inset

Petr Daněk: 
\emph on
Velký test PHP frameworků
\emph default
, Červenec 2008
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://www.root.cz/clanky/velky-test-php-frameworku-2008/"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "slicktest"

\end_inset


\emph on
Speed/validity selectors test for frameworks
\emph default
, 2007
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://mootools.net/slickspeed/"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "Moodle.cz"

\end_inset

Moodle: úvodní stránka, Červen 2009
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://moodle.cz/"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "CakePHP"

\end_inset

Cake Software Foundation: 
\emph on
The Cookbook
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://book.cakephp.org/"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "CakePHP-MVC"

\end_inset

Cake Software Foundation: 
\emph on
Porozumění Model-Pohled-Controller
\emph default

\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://book.cakephp.org/cz/view/10/Understanding-Model-View-Controller"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "MVC"

\end_inset

Wikipedia: 
\emph on
Model-view-controller
\emph default

\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://en.wikipedia.org/wiki/Model-view-controller"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "LDAP"

\end_inset


\emph on
LDAP datasource for cakePHP
\emph default
, Červenec 2007
\begin_inset Newline newline
\end_inset

http://bakery.cakephp.org/articles/view/ldap-datasource-for-cakephp
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "RFC1738"

\end_inset

Berners-Lee, Masinter & McCahill: Uniform Resource Locators (URL), 
\emph on
RFC1738
\emph default
, Prosinec 1994
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://www.ietf.org/rfc/rfc1738.txt"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "ORM"

\end_inset

Wikipedia: 
\emph on
Object-relational mapping
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://en.wikipedia.org/wiki/O-RM"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "i18n"

\end_inset


\emph on
I18n - Internacionalizace
\emph default

\begin_inset Newline newline
\end_inset

http://kore.fi.muni.cz:5080/wiki/index.php/
\begin_inset Newline newline
\end_inset

I18n_-_Internacionalizace
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "l10n"

\end_inset


\emph on
PV168/Lokalizace a internacionalizace
\emph default

\begin_inset Newline newline
\end_inset

http://kore.fi.muni.cz:5080/wiki/index.php/PV168/
\begin_inset Newline newline
\end_inset

Lokalizace_a_internacionalizace
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "p28n"

\end_inset

Jason Chow: 
\emph on
P28n, the top to bottom persistent internationalization tutorial
\emph default

\begin_inset Newline newline
\end_inset

http://bakery.cakephp.org/articles/view/
\begin_inset Newline newline
\end_inset

p28n-the-top-to-bottom-persistent-internationalization-tutorial
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "pass-gen"

\end_inset


\emph on
Random password generator component for CakePHP
\emph default
, Červen 2008
\begin_inset Newline newline
\end_inset

http://www.solitechgmbh.com/2008/06/11/
\begin_inset Newline newline
\end_inset

random-password-generator-component-for-cakephp/
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "linkable"

\end_inset

Rafael Bandeira: 
\emph on
Linkable Behavior.
 Taking it easy in your DB
\emph default
, Listopad 2008
\begin_inset Newline newline
\end_inset

http://blog.rafaelbandeira3.com/2008/11/16/
\begin_inset Newline newline
\end_inset

linkable-behavior-taking-it-easy-in-your-db/
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "ExtendAssoc"

\end_inset

Brandon Parise: 
\emph on
HABTM Add & Delete Behavior
\emph default
, Květen 2007
\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://bakery.cakephp.org/articles/view/add-delete-habtm-behavior"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "apache2"

\end_inset


\emph on
Apache HTTP Server Version 2.0 Documentation
\emph default

\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://httpd.apache.org/docs/2.0/"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "searchable"

\end_inset


\emph on
Searchable behaviour for CakePHP 1.2
\emph default

\begin_inset Newline newline
\end_inset

http://code.google.com/p/searchable-behaviour-for-cakephp/
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "asset"

\end_inset

Matt Curry: 
\emph on
Asset Packer CakePHP Plugin
\emph default
, July 2009
\begin_inset Newline newline
\end_inset

http://github.com/mcurry/asset
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "url-cache"

\end_inset

Matt Curry: 
\emph on
Asset Packer CakePHP Plugin
\emph default
, July 2009
\begin_inset Newline newline
\end_inset

http://github.com/mcurry/url_cache
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "MySQL"

\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://www.mysql.com/"

\end_inset


\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
key "ECMA-262"

\end_inset

 
\emph on
ECMAScript Language Specification
\emph default

\begin_inset Newline newline
\end_inset


\begin_inset CommandInset href
LatexCommand href
target "http://www.ecma-international.org/publications/standards/Ecma-262.htm"

\end_inset


\end_layout

\begin_layout Chapter
\start_of_appendix
Obsah přiloženého CD
\end_layout

\begin_layout Description
Bakalářská
\begin_inset space ~
\end_inset

práce tisknutelný PDF soubor s textem této práce.
\end_layout

\begin_layout Chapter
Databázové schéma
\begin_inset CommandInset label
LatexCommand label
name "cha:Databázové-schéma"

\end_inset


\end_layout

\begin_layout Standard

\end_layout

\begin_layout Standard
\begin_inset Graphics
	filename jednoduché schéma.png
	lyxscale 40
	height 80theight%

\end_inset


\end_layout

\end_body
\end_document
